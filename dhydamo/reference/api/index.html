
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Api - HYDROLIB documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="deltares" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#dhydamo" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="HYDROLIB documentation" class="md-header__button md-logo" aria-label="HYDROLIB documentation" data-md-component="logo">
      
  <img src="../../../images/HYDROLIB_logo_notext_mono_eroded.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            HYDROLIB documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Api
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="deltares" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Deltares/HYDROLIB" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    deltares/HYDROLIB
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../about/about_HYDROLIB/" class="md-tabs__link">
          
  
  
    
  
  About

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../guides/setup/" class="md-tabs__link">
          
  
  
    
  
  How-to

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../" class="md-tabs__link">
          
  
  
    
  
  Tools

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../reference/api/" class="md-tabs__link">
          
  
  
    
  
  Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../changelog/" class="md-tabs__link">
          
  
  
    
  
  Changelog

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="HYDROLIB documentation" class="md-nav__button md-logo" aria-label="HYDROLIB documentation" data-md-component="logo">
      
  <img src="../../../images/HYDROLIB_logo_notext_mono_eroded.svg" alt="logo">

    </a>
    HYDROLIB documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Deltares/HYDROLIB" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    deltares/HYDROLIB
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    About
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            About
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../about/about_HYDROLIB/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HYDROLIB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../about/about_partners/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Partners
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    How-to
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            How-to
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../guides/setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../guides/contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../guides/documentation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Documentation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tools
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    D-HyDAMO plugin
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            D-HyDAMO plugin
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../Profileoptimizer/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Profile Optimizer
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Profile Optimizer
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Profileoptimizer/api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API reference
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../HydroLogic_Inundation_Toolbox/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Inundation Toolbox
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Inundation Toolbox
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../case_management_tools/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Case Management Tools
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Case Management Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../arcadis/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    ARCADIS Tools
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            ARCADIS Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Changelog
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Changelog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Changelog
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>Api</h1>

<h2 id="dhydamo">DHyDAMO<a class="headerlink" href="#dhydamo" title="Permanent link">&para;</a></h2>
<p>The API references of DHyDAMO can be found below:</p>


<div class="doc doc-object doc-module">




    <div class="doc doc-contents first">










  <div class="doc doc-children">







<div class="doc doc-object doc-class">



<h3 id="hydrolib.dhydamo.converters.hydamo2df.CrossSectionsIO" class="doc doc-heading">
            <code>CrossSectionsIO</code>


<a href="#hydrolib.dhydamo.converters.hydamo2df.CrossSectionsIO" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">









              <details class="quote">
                <summary>Source code in <code>hydrolib/dhydamo/converters/hydamo2df.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CrossSectionsIO</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">crosssections</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span> <span class="o">=</span> <span class="n">crosssections</span>

    <span class="nd">@validate_arguments</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_datamodel</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">crsdefs</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">crslocs</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; &quot;</span>
<span class="sd">        From parsed data models of crsdefs and crslocs</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">crslocs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">crsloc</span> <span class="ow">in</span> <span class="n">crslocs</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
                <span class="c1"># add location</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">add_crosssection_location</span><span class="p">(</span>
                    <span class="n">branchid</span><span class="o">=</span><span class="n">crsloc</span><span class="p">[</span><span class="s2">&quot;branch_id&quot;</span><span class="p">],</span>
                    <span class="n">chainage</span><span class="o">=</span><span class="n">crsloc</span><span class="p">[</span><span class="s2">&quot;branch_offset&quot;</span><span class="p">],</span>
                    <span class="n">shift</span><span class="o">=</span><span class="n">crsloc</span><span class="p">[</span><span class="s2">&quot;shift&quot;</span><span class="p">],</span>
                    <span class="n">definition</span><span class="o">=</span><span class="n">crsloc</span><span class="p">[</span><span class="s2">&quot;crosssectiondefinitionid&quot;</span><span class="p">],</span>
                <span class="p">)</span>

        <span class="k">if</span> <span class="n">crsdefs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">crsdefs</span> <span class="o">=</span> <span class="n">crsdefs</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;crosssectiondefinitionid&quot;</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">crsdef</span> <span class="ow">in</span> <span class="n">crsdefs</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
                <span class="c1"># Set roughness value on default if cross-section has non defined (e.g. culverts)</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;frictionid&quot;</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span>
                    <span class="n">roughtype</span> <span class="o">=</span> <span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;frictionid&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">roughtype</span> <span class="o">=</span> <span class="s2">&quot;Chezy&quot;</span>

                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;frictionid&quot;</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span>
                    <span class="n">roughval</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;frictionid&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">roughval</span> <span class="o">=</span> <span class="mi">45</span>

                <span class="c1"># add definition</span>
                <span class="k">if</span> <span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;circle&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">add_circle_definition</span><span class="p">(</span>
                        <span class="n">diameter</span><span class="o">=</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;diameter&quot;</span><span class="p">],</span>
                        <span class="n">roughnesstype</span><span class="o">=</span><span class="n">roughtype</span><span class="p">,</span>
                        <span class="n">roughnessvalue</span><span class="o">=</span><span class="n">roughval</span><span class="p">,</span>
                        <span class="n">name</span><span class="o">=</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;crosssectiondefinitionid&quot;</span><span class="p">],</span>
                    <span class="p">)</span>
                <span class="k">elif</span> <span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;rectangle&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">add_rectangle_definition</span><span class="p">(</span>
                        <span class="n">height</span><span class="o">=</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;height&quot;</span><span class="p">],</span>
                        <span class="n">width</span><span class="o">=</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;width&quot;</span><span class="p">],</span>
                        <span class="n">closed</span><span class="o">=</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;closed&quot;</span><span class="p">],</span>
                        <span class="n">roughnesstype</span><span class="o">=</span><span class="n">roughtype</span><span class="p">,</span>
                        <span class="n">roughnessvalue</span><span class="o">=</span><span class="n">roughval</span><span class="p">,</span>
                        <span class="n">name</span><span class="o">=</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;crosssectiondefinitionid&quot;</span><span class="p">],</span>
                    <span class="p">)</span>
                <span class="k">elif</span> <span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;trapezium&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">add_trapezium_definition</span><span class="p">(</span>
                        <span class="n">slope</span><span class="o">=</span><span class="p">(</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;t_width&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;width&quot;</span><span class="p">])</span>
                        <span class="o">/</span> <span class="mi">2</span>
                        <span class="o">/</span> <span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;height&quot;</span><span class="p">],</span>
                        <span class="n">maximumflowwidth</span><span class="o">=</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;t_width&quot;</span><span class="p">],</span>
                        <span class="n">bottomwidth</span><span class="o">=</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;width&quot;</span><span class="p">],</span>
                        <span class="n">closed</span><span class="o">=</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;closed&quot;</span><span class="p">],</span>
                        <span class="n">roughnesstype</span><span class="o">=</span><span class="n">roughtype</span><span class="p">,</span>
                        <span class="n">roughnessvalue</span><span class="o">=</span><span class="n">roughval</span><span class="p">,</span>
                        <span class="n">name</span><span class="o">=</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;crosssectiondefinitionid&quot;</span><span class="p">],</span>
                    <span class="p">)</span>
                <span class="k">elif</span> <span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;zw&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">add_zw_definition</span><span class="p">(</span>
                        <span class="n">numLevels</span><span class="o">=</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;numlevels&quot;</span><span class="p">],</span>
                        <span class="n">levels</span><span class="o">=</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;levels&quot;</span><span class="p">],</span>
                        <span class="n">flowWidths</span><span class="o">=</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;flowwidths&quot;</span><span class="p">],</span>
                        <span class="n">totalWidths</span><span class="o">=</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;totalwidths&quot;</span><span class="p">],</span>
                        <span class="n">roughnesstype</span><span class="o">=</span><span class="n">roughtype</span><span class="p">,</span>
                        <span class="n">roughnessvalue</span><span class="o">=</span><span class="n">roughval</span><span class="p">,</span>
                        <span class="n">name</span><span class="o">=</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;crosssectiondefinitionid&quot;</span><span class="p">],</span>
                    <span class="p">)</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="nd">@validate_arguments</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">profiles</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">branches</span><span class="p">:</span> <span class="n">ExtendedGeoDataFrame</span><span class="p">,</span> <span class="c1"># = None,</span>
        <span class="n">roughness_variant</span><span class="p">:</span> <span class="n">RoughnessVariant</span><span class="p">,</span><span class="c1"># =None,</span>
        <span class="n">crosssections</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExtendedGeoDataFrame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">crosssection_roughness</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExtendedDataFrame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">profile_groups</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExtendedDataFrame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">profile_lines</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExtendedGeoDataFrame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">param_profile</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExtendedDataFrame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">param_profile_values</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExtendedDataFrame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method to add cross section from hydamo files. Two files</span>
<span class="sd">        can be handed to the function, the cross section file (dwarsprofiel) and the</span>
<span class="sd">        parametrised file (normgeparametriseerd). The</span>
<span class="sd">        hierarchical order is 1. dwarsprofiel, 2. normgeparametriseerd.</span>
<span class="sd">        Each branch will be assigned a profile following this order. If parametrised</span>
<span class="sd">        and standard are not given, branches can be wit hout cross section. In that case</span>
<span class="sd">        a standard profile should be assigned</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dp_branches</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">dp_structures</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">profile_groups</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># check for profile_groups items with valid brugid or stuwid. They need to be droppped from profiles.</span>
            <span class="n">groupidx</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">idx</span>
                <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">profile_groups</span><span class="o">.</span><span class="n">iterrows</span><span class="p">()</span>
                <span class="k">if</span> <span class="p">(</span><span class="s2">&quot;brugid&quot;</span> <span class="ow">in</span> <span class="n">profile_groups</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="ow">not</span> <span class="n">pd</span><span class="o">.</span><span class="n">isnull</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">brugid</span><span class="p">))</span>
            <span class="p">]</span>

            <span class="n">groupidx</span> <span class="o">=</span> <span class="n">groupidx</span> <span class="o">+</span> <span class="p">[</span>
                <span class="n">idx</span>
                <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">profile_groups</span><span class="o">.</span><span class="n">iterrows</span><span class="p">()</span>
                <span class="k">if</span> <span class="p">(</span><span class="s2">&quot;stuwid&quot;</span> <span class="ow">in</span> <span class="n">profile_groups</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="ow">not</span> <span class="n">pd</span><span class="o">.</span><span class="n">isnull</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">stuwid</span><span class="p">))</span>
            <span class="p">]</span>

            <span class="c1"># index of the lines that are associated to these groups</span>
            <span class="n">lineidx</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">profile_lines</span><span class="p">[</span>
                    <span class="n">profile_lines</span><span class="p">[</span><span class="s2">&quot;profielgroepid&quot;</span><span class="p">]</span>
                    <span class="o">==</span> <span class="n">profile_groups</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">grindex</span><span class="p">,</span> <span class="s2">&quot;globalid&quot;</span><span class="p">]</span>
                <span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">grindex</span> <span class="ow">in</span> <span class="n">groupidx</span>
            <span class="p">]</span>
            <span class="c1"># index of the profiles associated to these lines</span>
            <span class="n">profidx</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">crosssections</span><span class="p">[</span>
                    <span class="n">crosssections</span><span class="p">[</span><span class="s2">&quot;profiellijnid&quot;</span><span class="p">]</span>
                    <span class="o">==</span> <span class="n">profile_lines</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">lindex</span><span class="p">,</span> <span class="s2">&quot;globalid&quot;</span><span class="p">]</span>
                <span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">lindex</span> <span class="ow">in</span> <span class="n">lineidx</span>
            <span class="p">]</span>
            <span class="c1"># make a copy and drop the profiles corresponding to a structure</span>
            <span class="n">dp_branches</span> <span class="o">=</span> <span class="n">crosssections</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">dp_branches</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">profidx</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

            <span class="n">dp_structures</span> <span class="o">=</span> <span class="n">crosssections</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">dp_structures</span> <span class="o">=</span> <span class="n">dp_structures</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">profidx</span><span class="p">,</span> <span class="p">:]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dp_branches</span> <span class="o">=</span> <span class="n">crosssections</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Assign cross-sections to branches</span>
        <span class="n">nnocross</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">get_branches_without_crosssection</span><span class="p">())</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Before adding the number of branches without cross section is: </span><span class="si">{</span><span class="n">nnocross</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">dp_branches</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># 1. Collect cross sections from &#39;dwarsprofielen&#39;</span>
            <span class="n">yz_profiles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">crosssection_to_yzprofiles</span><span class="p">(</span>
                <span class="n">dp_branches</span><span class="p">,</span>
                <span class="n">crosssection_roughness</span><span class="p">,</span>
                <span class="n">branches</span><span class="p">,</span>
                <span class="n">roughness_variant</span><span class="o">=</span><span class="n">roughness_variant</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">css</span> <span class="ow">in</span> <span class="n">yz_profiles</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="c1"># Add definition</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">add_yz_definition</span><span class="p">(</span>
                    <span class="n">yz</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;yz&quot;</span><span class="p">],</span>
                    <span class="n">thalweg</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;thalweg&quot;</span><span class="p">],</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                    <span class="n">roughnesstype</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;typeruwheid&quot;</span><span class="p">],</span>
                    <span class="n">roughnessvalue</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;ruwheid&quot;</span><span class="p">],</span>
                <span class="p">)</span>
                <span class="c1"># Add location</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">add_crosssection_location</span><span class="p">(</span>
                    <span class="n">branchid</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;branchid&quot;</span><span class="p">],</span> <span class="n">chainage</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;chainage&quot;</span><span class="p">],</span> <span class="n">definition</span><span class="o">=</span><span class="n">name</span>
                <span class="p">)</span>

        <span class="c1"># Check the number of branches with cross sections</span>
        <span class="n">no_crosssection_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">get_branches_without_crosssection</span><span class="p">()</span>
        <span class="n">no_crosssection</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">b</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">branches</span><span class="o">.</span><span class="n">itertuples</span><span class="p">()</span> <span class="k">if</span> <span class="n">b</span><span class="o">.</span><span class="n">code</span> <span class="ow">in</span> <span class="n">no_crosssection_id</span>
        <span class="p">]</span>

        <span class="n">nnocross</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">no_crosssection</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;After adding &#39;dwarsprofielen&#39; the number of branches without cross section is: </span><span class="si">{</span><span class="n">nnocross</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">nnocross</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No further branches without a profile.&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">param_profile</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No parametrised crossections available for branches.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Derive norm cross sections for norm parametrised</span>
            <span class="n">param_profiles_converted</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">parametrised_to_profiles</span><span class="p">(</span>
                <span class="n">param_profile</span><span class="p">,</span>
                <span class="n">param_profile_values</span><span class="p">,</span>
                <span class="n">no_crosssection</span><span class="p">,</span>
                <span class="n">roughness_variant</span><span class="o">=</span><span class="n">roughness_variant</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="c1"># Get branch information</span>
            <span class="n">branchdata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">hydamo</span><span class="o">.</span><span class="n">branches</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
                <span class="nb">list</span><span class="p">(</span><span class="n">param_profiles_converted</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="p">]</span>
            <span class="n">branchdata</span><span class="p">[</span><span class="s2">&quot;chainage_upper&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.05</span> <span class="o">*</span> <span class="n">branchdata</span><span class="o">.</span><span class="n">length</span>
            <span class="n">branchdata</span><span class="p">[</span><span class="s2">&quot;chainage_lower&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.95</span> <span class="o">*</span> <span class="n">branchdata</span><span class="o">.</span><span class="n">length</span>


            <span class="c1"># Add cross sections</span>
            <span class="k">for</span> <span class="n">branchid</span><span class="p">,</span> <span class="n">css</span> <span class="ow">in</span> <span class="n">param_profiles_converted</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">chainage_upper</span> <span class="o">=</span> <span class="n">branchdata</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">branchid</span><span class="p">,</span> <span class="s2">&quot;chainage_upper&quot;</span><span class="p">]</span>
                <span class="n">chainage_lower</span> <span class="o">=</span> <span class="n">branchdata</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">branchid</span><span class="p">,</span> <span class="s2">&quot;chainage_lower&quot;</span><span class="p">]</span>

                <span class="k">if</span> <span class="n">css</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;rectangle&quot;</span><span class="p">:</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">add_rectangle_definition</span><span class="p">(</span>
                        <span class="n">height</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;height&quot;</span><span class="p">],</span>
                        <span class="n">width</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;width&quot;</span><span class="p">],</span>
                        <span class="n">closed</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;closed&quot;</span><span class="p">],</span>
                        <span class="n">roughnesstype</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;typeruwheid&quot;</span><span class="p">],</span>
                        <span class="n">roughnessvalue</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;ruwheid&quot;</span><span class="p">],</span>
                    <span class="p">)</span>

                <span class="k">if</span> <span class="n">css</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;trapezium&quot;</span><span class="p">:</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">add_trapezium_definition</span><span class="p">(</span>
                        <span class="n">slope</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;slope&quot;</span><span class="p">],</span>
                        <span class="n">maximumflowwidth</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;maximumflowwidth&quot;</span><span class="p">],</span>
                        <span class="n">bottomwidth</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;bottomwidth&quot;</span><span class="p">],</span>
                        <span class="n">closed</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;closed&quot;</span><span class="p">],</span>
                        <span class="n">roughnesstype</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;typeruwheid&quot;</span><span class="p">],</span>
                        <span class="n">roughnessvalue</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;ruwheid&quot;</span><span class="p">],</span>
                    <span class="p">)</span>

                <span class="c1"># Add location</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">add_crosssection_location</span><span class="p">(</span>
                    <span class="n">branchid</span><span class="o">=</span><span class="n">branchid</span><span class="p">,</span>
                    <span class="n">chainage</span><span class="o">=</span><span class="n">chainage_upper</span><span class="p">,</span>
                    <span class="n">definition</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                    <span class="n">shift</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;bottomlevel_upper&quot;</span><span class="p">],</span>
                <span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">add_crosssection_location</span><span class="p">(</span>
                    <span class="n">branchid</span><span class="o">=</span><span class="n">branchid</span><span class="p">,</span>
                    <span class="n">chainage</span><span class="o">=</span><span class="n">chainage_lower</span><span class="p">,</span>
                    <span class="n">definition</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                    <span class="n">shift</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;bottomlevel_lower&quot;</span><span class="p">],</span>
                <span class="p">)</span>

        <span class="n">nnocross</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">get_branches_without_crosssection</span><span class="p">())</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;After adding &#39;normgeparametriseerd&#39; the number of branches without cross section is: </span><span class="si">{</span><span class="n">nnocross</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">dp_structures</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># 1. Collect cross sections from &#39;dwarsprofielen&#39;</span>
            <span class="n">yz_profiles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">crosssection_to_yzprofiles</span><span class="p">(</span>
                <span class="n">dp_structures</span><span class="p">,</span>
                <span class="n">crosssection_roughness</span><span class="p">,</span>
                <span class="kc">None</span><span class="p">,</span>
                <span class="n">roughness_variant</span><span class="o">=</span><span class="n">roughness_variant</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">css</span> <span class="ow">in</span> <span class="n">yz_profiles</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="c1"># Add definition</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">add_yz_definition</span><span class="p">(</span>
                    <span class="n">yz</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;yz&quot;</span><span class="p">],</span>
                    <span class="n">thalweg</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;thalweg&quot;</span><span class="p">],</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                    <span class="n">roughnesstype</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;typeruwheid&quot;</span><span class="p">],</span>
                    <span class="n">roughnessvalue</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;ruwheid&quot;</span><span class="p">],</span>
                <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-function">


<h4 id="hydrolib.dhydamo.converters.hydamo2df.CrossSectionsIO.from_datamodel" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">from_datamodel</span><span class="p">(</span><span class="n">crsdefs</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">crslocs</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

<a href="#hydrolib.dhydamo.converters.hydamo2df.CrossSectionsIO.from_datamodel" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>"
From parsed data models of crsdefs and crslocs</p>


            <details class="quote">
              <summary>Source code in <code>hydrolib/dhydamo/converters/hydamo2df.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@validate_arguments</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_datamodel</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">crsdefs</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">crslocs</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; &quot;</span>
<span class="sd">    From parsed data models of crsdefs and crslocs</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">crslocs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">crsloc</span> <span class="ow">in</span> <span class="n">crslocs</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
            <span class="c1"># add location</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">add_crosssection_location</span><span class="p">(</span>
                <span class="n">branchid</span><span class="o">=</span><span class="n">crsloc</span><span class="p">[</span><span class="s2">&quot;branch_id&quot;</span><span class="p">],</span>
                <span class="n">chainage</span><span class="o">=</span><span class="n">crsloc</span><span class="p">[</span><span class="s2">&quot;branch_offset&quot;</span><span class="p">],</span>
                <span class="n">shift</span><span class="o">=</span><span class="n">crsloc</span><span class="p">[</span><span class="s2">&quot;shift&quot;</span><span class="p">],</span>
                <span class="n">definition</span><span class="o">=</span><span class="n">crsloc</span><span class="p">[</span><span class="s2">&quot;crosssectiondefinitionid&quot;</span><span class="p">],</span>
            <span class="p">)</span>

    <span class="k">if</span> <span class="n">crsdefs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">crsdefs</span> <span class="o">=</span> <span class="n">crsdefs</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;crosssectiondefinitionid&quot;</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">crsdef</span> <span class="ow">in</span> <span class="n">crsdefs</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
            <span class="c1"># Set roughness value on default if cross-section has non defined (e.g. culverts)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;frictionid&quot;</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">roughtype</span> <span class="o">=</span> <span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;frictionid&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">roughtype</span> <span class="o">=</span> <span class="s2">&quot;Chezy&quot;</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;frictionid&quot;</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">roughval</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;frictionid&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">roughval</span> <span class="o">=</span> <span class="mi">45</span>

            <span class="c1"># add definition</span>
            <span class="k">if</span> <span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;circle&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">add_circle_definition</span><span class="p">(</span>
                    <span class="n">diameter</span><span class="o">=</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;diameter&quot;</span><span class="p">],</span>
                    <span class="n">roughnesstype</span><span class="o">=</span><span class="n">roughtype</span><span class="p">,</span>
                    <span class="n">roughnessvalue</span><span class="o">=</span><span class="n">roughval</span><span class="p">,</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;crosssectiondefinitionid&quot;</span><span class="p">],</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;rectangle&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">add_rectangle_definition</span><span class="p">(</span>
                    <span class="n">height</span><span class="o">=</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;height&quot;</span><span class="p">],</span>
                    <span class="n">width</span><span class="o">=</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;width&quot;</span><span class="p">],</span>
                    <span class="n">closed</span><span class="o">=</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;closed&quot;</span><span class="p">],</span>
                    <span class="n">roughnesstype</span><span class="o">=</span><span class="n">roughtype</span><span class="p">,</span>
                    <span class="n">roughnessvalue</span><span class="o">=</span><span class="n">roughval</span><span class="p">,</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;crosssectiondefinitionid&quot;</span><span class="p">],</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;trapezium&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">add_trapezium_definition</span><span class="p">(</span>
                    <span class="n">slope</span><span class="o">=</span><span class="p">(</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;t_width&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;width&quot;</span><span class="p">])</span>
                    <span class="o">/</span> <span class="mi">2</span>
                    <span class="o">/</span> <span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;height&quot;</span><span class="p">],</span>
                    <span class="n">maximumflowwidth</span><span class="o">=</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;t_width&quot;</span><span class="p">],</span>
                    <span class="n">bottomwidth</span><span class="o">=</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;width&quot;</span><span class="p">],</span>
                    <span class="n">closed</span><span class="o">=</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;closed&quot;</span><span class="p">],</span>
                    <span class="n">roughnesstype</span><span class="o">=</span><span class="n">roughtype</span><span class="p">,</span>
                    <span class="n">roughnessvalue</span><span class="o">=</span><span class="n">roughval</span><span class="p">,</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;crosssectiondefinitionid&quot;</span><span class="p">],</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;zw&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">add_zw_definition</span><span class="p">(</span>
                    <span class="n">numLevels</span><span class="o">=</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;numlevels&quot;</span><span class="p">],</span>
                    <span class="n">levels</span><span class="o">=</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;levels&quot;</span><span class="p">],</span>
                    <span class="n">flowWidths</span><span class="o">=</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;flowwidths&quot;</span><span class="p">],</span>
                    <span class="n">totalWidths</span><span class="o">=</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;totalwidths&quot;</span><span class="p">],</span>
                    <span class="n">roughnesstype</span><span class="o">=</span><span class="n">roughtype</span><span class="p">,</span>
                    <span class="n">roughnessvalue</span><span class="o">=</span><span class="n">roughval</span><span class="p">,</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">crsdef</span><span class="p">[</span><span class="s2">&quot;crosssectiondefinitionid&quot;</span><span class="p">],</span>
                <span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h4 id="hydrolib.dhydamo.converters.hydamo2df.CrossSectionsIO.profiles" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">profiles</span><span class="p">(</span><span class="n">branches</span><span class="p">:</span> <span class="n">ExtendedGeoDataFrame</span><span class="p">,</span> <span class="n">roughness_variant</span><span class="p">:</span> <span class="n">RoughnessVariant</span><span class="p">,</span> <span class="n">crosssections</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExtendedGeoDataFrame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">crosssection_roughness</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExtendedDataFrame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">profile_groups</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExtendedDataFrame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">profile_lines</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExtendedGeoDataFrame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">param_profile</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExtendedDataFrame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">param_profile_values</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExtendedDataFrame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

<a href="#hydrolib.dhydamo.converters.hydamo2df.CrossSectionsIO.profiles" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Method to add cross section from hydamo files. Two files
can be handed to the function, the cross section file (dwarsprofiel) and the
parametrised file (normgeparametriseerd). The
hierarchical order is 1. dwarsprofiel, 2. normgeparametriseerd.
Each branch will be assigned a profile following this order. If parametrised
and standard are not given, branches can be wit hout cross section. In that case
a standard profile should be assigned</p>


            <details class="quote">
              <summary>Source code in <code>hydrolib/dhydamo/converters/hydamo2df.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@validate_arguments</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">profiles</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">branches</span><span class="p">:</span> <span class="n">ExtendedGeoDataFrame</span><span class="p">,</span> <span class="c1"># = None,</span>
    <span class="n">roughness_variant</span><span class="p">:</span> <span class="n">RoughnessVariant</span><span class="p">,</span><span class="c1"># =None,</span>
    <span class="n">crosssections</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExtendedGeoDataFrame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">crosssection_roughness</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExtendedDataFrame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">profile_groups</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExtendedDataFrame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">profile_lines</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExtendedGeoDataFrame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">param_profile</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExtendedDataFrame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">param_profile_values</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExtendedDataFrame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method to add cross section from hydamo files. Two files</span>
<span class="sd">    can be handed to the function, the cross section file (dwarsprofiel) and the</span>
<span class="sd">    parametrised file (normgeparametriseerd). The</span>
<span class="sd">    hierarchical order is 1. dwarsprofiel, 2. normgeparametriseerd.</span>
<span class="sd">    Each branch will be assigned a profile following this order. If parametrised</span>
<span class="sd">    and standard are not given, branches can be wit hout cross section. In that case</span>
<span class="sd">    a standard profile should be assigned</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">dp_branches</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">dp_structures</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">profile_groups</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># check for profile_groups items with valid brugid or stuwid. They need to be droppped from profiles.</span>
        <span class="n">groupidx</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">idx</span>
            <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">profile_groups</span><span class="o">.</span><span class="n">iterrows</span><span class="p">()</span>
            <span class="k">if</span> <span class="p">(</span><span class="s2">&quot;brugid&quot;</span> <span class="ow">in</span> <span class="n">profile_groups</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="ow">not</span> <span class="n">pd</span><span class="o">.</span><span class="n">isnull</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">brugid</span><span class="p">))</span>
        <span class="p">]</span>

        <span class="n">groupidx</span> <span class="o">=</span> <span class="n">groupidx</span> <span class="o">+</span> <span class="p">[</span>
            <span class="n">idx</span>
            <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">profile_groups</span><span class="o">.</span><span class="n">iterrows</span><span class="p">()</span>
            <span class="k">if</span> <span class="p">(</span><span class="s2">&quot;stuwid&quot;</span> <span class="ow">in</span> <span class="n">profile_groups</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="ow">not</span> <span class="n">pd</span><span class="o">.</span><span class="n">isnull</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">stuwid</span><span class="p">))</span>
        <span class="p">]</span>

        <span class="c1"># index of the lines that are associated to these groups</span>
        <span class="n">lineidx</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">profile_lines</span><span class="p">[</span>
                <span class="n">profile_lines</span><span class="p">[</span><span class="s2">&quot;profielgroepid&quot;</span><span class="p">]</span>
                <span class="o">==</span> <span class="n">profile_groups</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">grindex</span><span class="p">,</span> <span class="s2">&quot;globalid&quot;</span><span class="p">]</span>
            <span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">grindex</span> <span class="ow">in</span> <span class="n">groupidx</span>
        <span class="p">]</span>
        <span class="c1"># index of the profiles associated to these lines</span>
        <span class="n">profidx</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">crosssections</span><span class="p">[</span>
                <span class="n">crosssections</span><span class="p">[</span><span class="s2">&quot;profiellijnid&quot;</span><span class="p">]</span>
                <span class="o">==</span> <span class="n">profile_lines</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">lindex</span><span class="p">,</span> <span class="s2">&quot;globalid&quot;</span><span class="p">]</span>
            <span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">lindex</span> <span class="ow">in</span> <span class="n">lineidx</span>
        <span class="p">]</span>
        <span class="c1"># make a copy and drop the profiles corresponding to a structure</span>
        <span class="n">dp_branches</span> <span class="o">=</span> <span class="n">crosssections</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">dp_branches</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">profidx</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">dp_structures</span> <span class="o">=</span> <span class="n">crosssections</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">dp_structures</span> <span class="o">=</span> <span class="n">dp_structures</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">profidx</span><span class="p">,</span> <span class="p">:]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">dp_branches</span> <span class="o">=</span> <span class="n">crosssections</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Assign cross-sections to branches</span>
    <span class="n">nnocross</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">get_branches_without_crosssection</span><span class="p">())</span>
    <span class="nb">print</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Before adding the number of branches without cross section is: </span><span class="si">{</span><span class="n">nnocross</span><span class="si">}</span><span class="s2">.&quot;</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">dp_branches</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># 1. Collect cross sections from &#39;dwarsprofielen&#39;</span>
        <span class="n">yz_profiles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">crosssection_to_yzprofiles</span><span class="p">(</span>
            <span class="n">dp_branches</span><span class="p">,</span>
            <span class="n">crosssection_roughness</span><span class="p">,</span>
            <span class="n">branches</span><span class="p">,</span>
            <span class="n">roughness_variant</span><span class="o">=</span><span class="n">roughness_variant</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">css</span> <span class="ow">in</span> <span class="n">yz_profiles</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="c1"># Add definition</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">add_yz_definition</span><span class="p">(</span>
                <span class="n">yz</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;yz&quot;</span><span class="p">],</span>
                <span class="n">thalweg</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;thalweg&quot;</span><span class="p">],</span>
                <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                <span class="n">roughnesstype</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;typeruwheid&quot;</span><span class="p">],</span>
                <span class="n">roughnessvalue</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;ruwheid&quot;</span><span class="p">],</span>
            <span class="p">)</span>
            <span class="c1"># Add location</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">add_crosssection_location</span><span class="p">(</span>
                <span class="n">branchid</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;branchid&quot;</span><span class="p">],</span> <span class="n">chainage</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;chainage&quot;</span><span class="p">],</span> <span class="n">definition</span><span class="o">=</span><span class="n">name</span>
            <span class="p">)</span>

    <span class="c1"># Check the number of branches with cross sections</span>
    <span class="n">no_crosssection_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">get_branches_without_crosssection</span><span class="p">()</span>
    <span class="n">no_crosssection</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">b</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">branches</span><span class="o">.</span><span class="n">itertuples</span><span class="p">()</span> <span class="k">if</span> <span class="n">b</span><span class="o">.</span><span class="n">code</span> <span class="ow">in</span> <span class="n">no_crosssection_id</span>
    <span class="p">]</span>

    <span class="n">nnocross</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">no_crosssection</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;After adding &#39;dwarsprofielen&#39; the number of branches without cross section is: </span><span class="si">{</span><span class="n">nnocross</span><span class="si">}</span><span class="s2">.&quot;</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">nnocross</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No further branches without a profile.&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">param_profile</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No parametrised crossections available for branches.&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Derive norm cross sections for norm parametrised</span>
        <span class="n">param_profiles_converted</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">parametrised_to_profiles</span><span class="p">(</span>
            <span class="n">param_profile</span><span class="p">,</span>
            <span class="n">param_profile_values</span><span class="p">,</span>
            <span class="n">no_crosssection</span><span class="p">,</span>
            <span class="n">roughness_variant</span><span class="o">=</span><span class="n">roughness_variant</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="c1"># Get branch information</span>
        <span class="n">branchdata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">hydamo</span><span class="o">.</span><span class="n">branches</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
            <span class="nb">list</span><span class="p">(</span><span class="n">param_profiles_converted</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="p">]</span>
        <span class="n">branchdata</span><span class="p">[</span><span class="s2">&quot;chainage_upper&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.05</span> <span class="o">*</span> <span class="n">branchdata</span><span class="o">.</span><span class="n">length</span>
        <span class="n">branchdata</span><span class="p">[</span><span class="s2">&quot;chainage_lower&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.95</span> <span class="o">*</span> <span class="n">branchdata</span><span class="o">.</span><span class="n">length</span>


        <span class="c1"># Add cross sections</span>
        <span class="k">for</span> <span class="n">branchid</span><span class="p">,</span> <span class="n">css</span> <span class="ow">in</span> <span class="n">param_profiles_converted</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">chainage_upper</span> <span class="o">=</span> <span class="n">branchdata</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">branchid</span><span class="p">,</span> <span class="s2">&quot;chainage_upper&quot;</span><span class="p">]</span>
            <span class="n">chainage_lower</span> <span class="o">=</span> <span class="n">branchdata</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">branchid</span><span class="p">,</span> <span class="s2">&quot;chainage_lower&quot;</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">css</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;rectangle&quot;</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">add_rectangle_definition</span><span class="p">(</span>
                    <span class="n">height</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;height&quot;</span><span class="p">],</span>
                    <span class="n">width</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;width&quot;</span><span class="p">],</span>
                    <span class="n">closed</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;closed&quot;</span><span class="p">],</span>
                    <span class="n">roughnesstype</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;typeruwheid&quot;</span><span class="p">],</span>
                    <span class="n">roughnessvalue</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;ruwheid&quot;</span><span class="p">],</span>
                <span class="p">)</span>

            <span class="k">if</span> <span class="n">css</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;trapezium&quot;</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">add_trapezium_definition</span><span class="p">(</span>
                    <span class="n">slope</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;slope&quot;</span><span class="p">],</span>
                    <span class="n">maximumflowwidth</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;maximumflowwidth&quot;</span><span class="p">],</span>
                    <span class="n">bottomwidth</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;bottomwidth&quot;</span><span class="p">],</span>
                    <span class="n">closed</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;closed&quot;</span><span class="p">],</span>
                    <span class="n">roughnesstype</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;typeruwheid&quot;</span><span class="p">],</span>
                    <span class="n">roughnessvalue</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;ruwheid&quot;</span><span class="p">],</span>
                <span class="p">)</span>

            <span class="c1"># Add location</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">add_crosssection_location</span><span class="p">(</span>
                <span class="n">branchid</span><span class="o">=</span><span class="n">branchid</span><span class="p">,</span>
                <span class="n">chainage</span><span class="o">=</span><span class="n">chainage_upper</span><span class="p">,</span>
                <span class="n">definition</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                <span class="n">shift</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;bottomlevel_upper&quot;</span><span class="p">],</span>
            <span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">add_crosssection_location</span><span class="p">(</span>
                <span class="n">branchid</span><span class="o">=</span><span class="n">branchid</span><span class="p">,</span>
                <span class="n">chainage</span><span class="o">=</span><span class="n">chainage_lower</span><span class="p">,</span>
                <span class="n">definition</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                <span class="n">shift</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;bottomlevel_lower&quot;</span><span class="p">],</span>
            <span class="p">)</span>

    <span class="n">nnocross</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">get_branches_without_crosssection</span><span class="p">())</span>
    <span class="nb">print</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;After adding &#39;normgeparametriseerd&#39; the number of branches without cross section is: </span><span class="si">{</span><span class="n">nnocross</span><span class="si">}</span><span class="s2">.&quot;</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">dp_structures</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># 1. Collect cross sections from &#39;dwarsprofielen&#39;</span>
        <span class="n">yz_profiles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">crosssection_to_yzprofiles</span><span class="p">(</span>
            <span class="n">dp_structures</span><span class="p">,</span>
            <span class="n">crosssection_roughness</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">roughness_variant</span><span class="o">=</span><span class="n">roughness_variant</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">css</span> <span class="ow">in</span> <span class="n">yz_profiles</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="c1"># Add definition</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">crosssections</span><span class="o">.</span><span class="n">add_yz_definition</span><span class="p">(</span>
                <span class="n">yz</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;yz&quot;</span><span class="p">],</span>
                <span class="n">thalweg</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;thalweg&quot;</span><span class="p">],</span>
                <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                <span class="n">roughnesstype</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;typeruwheid&quot;</span><span class="p">],</span>
                <span class="n">roughnessvalue</span><span class="o">=</span><span class="n">css</span><span class="p">[</span><span class="s2">&quot;ruwheid&quot;</span><span class="p">],</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>




  </div>

    </div>

</div>














<div class="doc doc-object doc-class">



<h3 id="hydrolib.dhydamo.converters.hydamo2df.ExternalForcingsIO" class="doc doc-heading">
            <code>ExternalForcingsIO</code>


<a href="#hydrolib.dhydamo.converters.hydamo2df.ExternalForcingsIO" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">









              <details class="quote">
                <summary>Source code in <code>hydrolib/dhydamo/converters/hydamo2df.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ExternalForcingsIO</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">external_forcings</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">external_forcings</span> <span class="o">=</span> <span class="n">external_forcings</span>

    <span class="nd">@validate_arguments</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">boundaries</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">boundary_conditions</span><span class="p">:</span> <span class="n">ExtendedGeoDataFrame</span><span class="p">,</span> <span class="n">mesh1d</span><span class="p">:</span> <span class="n">Network</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate boundary conditions from hydamo &#39;randvoorwaarden&#39; file. The file format does not allow for timeseries.</span>

<span class="sd">        To add a time series, use &#39;add_boundary&#39; from the workflow.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        boundary_conditions: gpd.GeoDataFrame</span>
<span class="sd">            geodataframe with the locations and properties of the boundary conditions</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        dictionary</span>
<span class="sd">            Dictionary with attributes of boundary conditions, usable for dflowfm</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Read from Hydamo</span>
        <span class="n">bcdct</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">bndcnd</span> <span class="ow">in</span> <span class="n">boundary_conditions</span><span class="o">.</span><span class="n">itertuples</span><span class="p">():</span>
            <span class="k">if</span> <span class="s2">&quot;waterstand&quot;</span> <span class="ow">in</span> <span class="n">bndcnd</span><span class="o">.</span><span class="n">typerandvoorwaarde</span><span class="p">:</span>
                <span class="n">quantity</span> <span class="o">=</span> <span class="s2">&quot;waterlevelbnd&quot;</span>
            <span class="k">elif</span> <span class="s2">&quot;debiet&quot;</span> <span class="ow">in</span> <span class="n">bndcnd</span><span class="o">.</span><span class="n">typerandvoorwaarde</span><span class="p">:</span>
                <span class="n">quantity</span> <span class="o">=</span> <span class="s2">&quot;dischargebnd&quot;</span>

            <span class="c1"># Add boundary condition</span>
            <span class="n">bcdct</span><span class="p">[</span><span class="n">bndcnd</span><span class="o">.</span><span class="n">code</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="n">bndcnd</span><span class="o">.</span><span class="n">code</span><span class="p">,</span>
                <span class="s2">&quot;quantity&quot;</span><span class="p">:</span> <span class="n">quantity</span><span class="p">,</span>
                <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">bndcnd</span><span class="o">.</span><span class="n">waterstand</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">bndcnd</span><span class="o">.</span><span class="n">waterstand</span><span class="p">)</span>
                <span class="k">else</span> <span class="n">bndcnd</span><span class="o">.</span><span class="n">debiet</span><span class="p">,</span>
                <span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;geometry&quot;</span><span class="p">:</span> <span class="n">bndcnd</span><span class="o">.</span><span class="n">geometry</span><span class="p">,</span>
            <span class="p">}</span>

        <span class="c1"># Add all items</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">bcdct</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">external_forcings</span><span class="o">.</span><span class="n">add_boundary_condition</span><span class="p">(</span>
                <span class="n">key</span><span class="p">,</span> <span class="n">item</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">],</span> <span class="n">item</span><span class="p">[</span><span class="s2">&quot;quantity&quot;</span><span class="p">],</span> <span class="n">item</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">],</span> <span class="n">mesh1d</span><span class="o">=</span><span class="n">mesh1d</span>
            <span class="p">)</span>

    <span class="nd">@validate_arguments</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">laterals</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">locations</span><span class="p">:</span> <span class="n">ExtendedGeoDataFrame</span><span class="p">,</span>
        <span class="n">overflows</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExtendedGeoDataFrame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">greenhouse_laterals</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExtendedGeoDataFrame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">lateral_discharges</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">]]</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">rr_boundaries</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Process laterals</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        locations: gpd.GeoDataFrame</span>
<span class="sd">            GeoDataFrame with at least &#39;geometry&#39; (Point) and the column &#39;code&#39;</span>
<span class="sd">        lateral_discharges: pd.DataFrame</span>
<span class="sd">            DataFrame with lateral discharges. The index should be a time object (datetime or similar).</span>
<span class="sd">        rr_boundaries: pd.DataFrame</span>
<span class="sd">            DataFrame with RR-catchments that are coupled</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">rr_boundaries</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">rr_boundaries</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># in case of 3d points, remove the 3rd dimension</span>
        <span class="n">locations</span><span class="p">[</span><span class="s2">&quot;geometry2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">Point</span><span class="p">([</span><span class="n">point</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">point</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">y</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">locations</span><span class="o">.</span><span class="n">iterrows</span><span class="p">()</span>
        <span class="p">]</span>
        <span class="n">locations</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s2">&quot;geometry&quot;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">locations</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;geometry2&quot;</span><span class="p">:</span> <span class="s2">&quot;geometry&quot;</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">latdct</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">overflows</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">locations</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">locations</span><span class="p">,</span> <span class="n">overflows</span><span class="p">],</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">greenhouse_laterals</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">locations</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">locations</span><span class="p">,</span> <span class="n">greenhouse_laterals</span><span class="p">],</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Get time series and add to dictionary</span>
        <span class="c1"># for nidx, lateral in zip(nearest_idx, locations.itertuples()):</span>
        <span class="k">for</span> <span class="n">lateral</span> <span class="ow">in</span> <span class="n">locations</span><span class="o">.</span><span class="n">itertuples</span><span class="p">():</span>
            <span class="c1"># Check if a time is provided for the lateral</span>
            <span class="k">if</span> <span class="n">lateral</span><span class="o">.</span><span class="n">code</span> <span class="ow">in</span> <span class="n">rr_boundaries</span><span class="p">:</span>
                <span class="c1"># Add to dictionary</span>
                <span class="n">latdct</span><span class="p">[</span><span class="n">lateral</span><span class="o">.</span><span class="n">code</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;branchid&quot;</span><span class="p">:</span> <span class="n">lateral</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
                    <span class="s2">&quot;chainage&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">lateral</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">),</span>
                    <span class="s2">&quot;discharge&quot;</span><span class="p">:</span> <span class="s2">&quot;realtime&quot;</span><span class="p">,</span>
                <span class="p">}</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">lateral_discharges</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;No lateral_discharges provided. </span><span class="si">{</span><span class="n">lateral</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s2"> expects them. Skipping.&quot;</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lateral_discharges</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                        <span class="n">series</span> <span class="o">=</span> <span class="n">lateral_discharges</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">lateral</span><span class="o">.</span><span class="n">code</span><span class="p">]</span>

                        <span class="c1"># Add to dictionary</span>
                        <span class="n">latdct</span><span class="p">[</span><span class="n">lateral</span><span class="o">.</span><span class="n">code</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                            <span class="s2">&quot;branchid&quot;</span><span class="p">:</span> <span class="n">lateral</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
                            <span class="s2">&quot;chainage&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">lateral</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">),</span>
                            <span class="s2">&quot;discharge&quot;</span><span class="p">:</span> <span class="n">series</span><span class="p">,</span>
                        <span class="p">}</span>

                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">lateral</span><span class="o">.</span><span class="n">code</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">lateral_discharges</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
                            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                                <span class="sa">f</span><span class="s2">&quot;No data found for </span><span class="si">{</span><span class="n">lateral</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s2">. Skipping.&quot;</span>
                            <span class="p">)</span>
                            <span class="k">continue</span>

                        <span class="c1"># Get timeseries</span>
                        <span class="n">series</span> <span class="o">=</span> <span class="n">lateral_discharges</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">lateral</span><span class="o">.</span><span class="n">code</span><span class="p">]</span>

                        <span class="c1"># Add to dictionary</span>
                        <span class="n">latdct</span><span class="p">[</span><span class="n">lateral</span><span class="o">.</span><span class="n">code</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                            <span class="s2">&quot;branchid&quot;</span><span class="p">:</span> <span class="n">lateral</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
                            <span class="s2">&quot;chainage&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">lateral</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">),</span>
                            <span class="s2">&quot;discharge&quot;</span><span class="p">:</span> <span class="n">series</span><span class="p">,</span>
                        <span class="p">}</span>

        <span class="c1"># Add all items</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">latdct</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">external_forcings</span><span class="o">.</span><span class="n">add_lateral</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
                <span class="n">branchid</span><span class="o">=</span><span class="n">item</span><span class="p">[</span><span class="s2">&quot;branchid&quot;</span><span class="p">],</span>
                <span class="n">chainage</span><span class="o">=</span><span class="n">item</span><span class="p">[</span><span class="s2">&quot;chainage&quot;</span><span class="p">],</span>
                <span class="n">discharge</span><span class="o">=</span><span class="n">item</span><span class="p">[</span><span class="s2">&quot;discharge&quot;</span><span class="p">],</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-function">


<h4 id="hydrolib.dhydamo.converters.hydamo2df.ExternalForcingsIO.boundaries" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">boundaries</span><span class="p">(</span><span class="n">boundary_conditions</span><span class="p">:</span> <span class="n">ExtendedGeoDataFrame</span><span class="p">,</span> <span class="n">mesh1d</span><span class="p">:</span> <span class="n">Network</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

<a href="#hydrolib.dhydamo.converters.hydamo2df.ExternalForcingsIO.boundaries" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Generate boundary conditions from hydamo 'randvoorwaarden' file. The file format does not allow for timeseries.</p>
<p>To add a time series, use 'add_boundary' from the workflow.</p>
<h6 id="hydrolib.dhydamo.converters.hydamo2df.ExternalForcingsIO.boundaries--parameters">Parameters<a class="headerlink" href="#hydrolib.dhydamo.converters.hydamo2df.ExternalForcingsIO.boundaries--parameters" title="Permanent link">&para;</a></h6>
<p>boundary_conditions: gpd.GeoDataFrame
    geodataframe with the locations and properties of the boundary conditions</p>
<h6 id="hydrolib.dhydamo.converters.hydamo2df.ExternalForcingsIO.boundaries--returns">Returns<a class="headerlink" href="#hydrolib.dhydamo.converters.hydamo2df.ExternalForcingsIO.boundaries--returns" title="Permanent link">&para;</a></h6>
<p>dictionary
    Dictionary with attributes of boundary conditions, usable for dflowfm</p>


            <details class="quote">
              <summary>Source code in <code>hydrolib/dhydamo/converters/hydamo2df.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@validate_arguments</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">boundaries</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">boundary_conditions</span><span class="p">:</span> <span class="n">ExtendedGeoDataFrame</span><span class="p">,</span> <span class="n">mesh1d</span><span class="p">:</span> <span class="n">Network</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate boundary conditions from hydamo &#39;randvoorwaarden&#39; file. The file format does not allow for timeseries.</span>

<span class="sd">    To add a time series, use &#39;add_boundary&#39; from the workflow.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    boundary_conditions: gpd.GeoDataFrame</span>
<span class="sd">        geodataframe with the locations and properties of the boundary conditions</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    dictionary</span>
<span class="sd">        Dictionary with attributes of boundary conditions, usable for dflowfm</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Read from Hydamo</span>
    <span class="n">bcdct</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">bndcnd</span> <span class="ow">in</span> <span class="n">boundary_conditions</span><span class="o">.</span><span class="n">itertuples</span><span class="p">():</span>
        <span class="k">if</span> <span class="s2">&quot;waterstand&quot;</span> <span class="ow">in</span> <span class="n">bndcnd</span><span class="o">.</span><span class="n">typerandvoorwaarde</span><span class="p">:</span>
            <span class="n">quantity</span> <span class="o">=</span> <span class="s2">&quot;waterlevelbnd&quot;</span>
        <span class="k">elif</span> <span class="s2">&quot;debiet&quot;</span> <span class="ow">in</span> <span class="n">bndcnd</span><span class="o">.</span><span class="n">typerandvoorwaarde</span><span class="p">:</span>
            <span class="n">quantity</span> <span class="o">=</span> <span class="s2">&quot;dischargebnd&quot;</span>

        <span class="c1"># Add boundary condition</span>
        <span class="n">bcdct</span><span class="p">[</span><span class="n">bndcnd</span><span class="o">.</span><span class="n">code</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="n">bndcnd</span><span class="o">.</span><span class="n">code</span><span class="p">,</span>
            <span class="s2">&quot;quantity&quot;</span><span class="p">:</span> <span class="n">quantity</span><span class="p">,</span>
            <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">bndcnd</span><span class="o">.</span><span class="n">waterstand</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">bndcnd</span><span class="o">.</span><span class="n">waterstand</span><span class="p">)</span>
            <span class="k">else</span> <span class="n">bndcnd</span><span class="o">.</span><span class="n">debiet</span><span class="p">,</span>
            <span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;geometry&quot;</span><span class="p">:</span> <span class="n">bndcnd</span><span class="o">.</span><span class="n">geometry</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="c1"># Add all items</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">bcdct</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">external_forcings</span><span class="o">.</span><span class="n">add_boundary_condition</span><span class="p">(</span>
            <span class="n">key</span><span class="p">,</span> <span class="n">item</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">],</span> <span class="n">item</span><span class="p">[</span><span class="s2">&quot;quantity&quot;</span><span class="p">],</span> <span class="n">item</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">],</span> <span class="n">mesh1d</span><span class="o">=</span><span class="n">mesh1d</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h4 id="hydrolib.dhydamo.converters.hydamo2df.ExternalForcingsIO.laterals" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">laterals</span><span class="p">(</span><span class="n">locations</span><span class="p">:</span> <span class="n">ExtendedGeoDataFrame</span><span class="p">,</span> <span class="n">overflows</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExtendedGeoDataFrame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">greenhouse_laterals</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExtendedGeoDataFrame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">lateral_discharges</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">rr_boundaries</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

<a href="#hydrolib.dhydamo.converters.hydamo2df.ExternalForcingsIO.laterals" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Process laterals</p>
<h6 id="hydrolib.dhydamo.converters.hydamo2df.ExternalForcingsIO.laterals--parameters">Parameters<a class="headerlink" href="#hydrolib.dhydamo.converters.hydamo2df.ExternalForcingsIO.laterals--parameters" title="Permanent link">&para;</a></h6>
<p>locations: gpd.GeoDataFrame
    GeoDataFrame with at least 'geometry' (Point) and the column 'code'
lateral_discharges: pd.DataFrame
    DataFrame with lateral discharges. The index should be a time object (datetime or similar).
rr_boundaries: pd.DataFrame
    DataFrame with RR-catchments that are coupled</p>


            <details class="quote">
              <summary>Source code in <code>hydrolib/dhydamo/converters/hydamo2df.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@validate_arguments</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">laterals</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">locations</span><span class="p">:</span> <span class="n">ExtendedGeoDataFrame</span><span class="p">,</span>
    <span class="n">overflows</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExtendedGeoDataFrame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">greenhouse_laterals</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExtendedGeoDataFrame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">lateral_discharges</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">]]</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">rr_boundaries</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Process laterals</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    locations: gpd.GeoDataFrame</span>
<span class="sd">        GeoDataFrame with at least &#39;geometry&#39; (Point) and the column &#39;code&#39;</span>
<span class="sd">    lateral_discharges: pd.DataFrame</span>
<span class="sd">        DataFrame with lateral discharges. The index should be a time object (datetime or similar).</span>
<span class="sd">    rr_boundaries: pd.DataFrame</span>
<span class="sd">        DataFrame with RR-catchments that are coupled</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">rr_boundaries</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">rr_boundaries</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># in case of 3d points, remove the 3rd dimension</span>
    <span class="n">locations</span><span class="p">[</span><span class="s2">&quot;geometry2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Point</span><span class="p">([</span><span class="n">point</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">point</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">y</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">locations</span><span class="o">.</span><span class="n">iterrows</span><span class="p">()</span>
    <span class="p">]</span>
    <span class="n">locations</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s2">&quot;geometry&quot;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">locations</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;geometry2&quot;</span><span class="p">:</span> <span class="s2">&quot;geometry&quot;</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">latdct</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">overflows</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">locations</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">locations</span><span class="p">,</span> <span class="n">overflows</span><span class="p">],</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">greenhouse_laterals</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">locations</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">locations</span><span class="p">,</span> <span class="n">greenhouse_laterals</span><span class="p">],</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Get time series and add to dictionary</span>
    <span class="c1"># for nidx, lateral in zip(nearest_idx, locations.itertuples()):</span>
    <span class="k">for</span> <span class="n">lateral</span> <span class="ow">in</span> <span class="n">locations</span><span class="o">.</span><span class="n">itertuples</span><span class="p">():</span>
        <span class="c1"># Check if a time is provided for the lateral</span>
        <span class="k">if</span> <span class="n">lateral</span><span class="o">.</span><span class="n">code</span> <span class="ow">in</span> <span class="n">rr_boundaries</span><span class="p">:</span>
            <span class="c1"># Add to dictionary</span>
            <span class="n">latdct</span><span class="p">[</span><span class="n">lateral</span><span class="o">.</span><span class="n">code</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;branchid&quot;</span><span class="p">:</span> <span class="n">lateral</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
                <span class="s2">&quot;chainage&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">lateral</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">),</span>
                <span class="s2">&quot;discharge&quot;</span><span class="p">:</span> <span class="s2">&quot;realtime&quot;</span><span class="p">,</span>
            <span class="p">}</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">lateral_discharges</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;No lateral_discharges provided. </span><span class="si">{</span><span class="n">lateral</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s2"> expects them. Skipping.&quot;</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lateral_discharges</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                    <span class="n">series</span> <span class="o">=</span> <span class="n">lateral_discharges</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">lateral</span><span class="o">.</span><span class="n">code</span><span class="p">]</span>

                    <span class="c1"># Add to dictionary</span>
                    <span class="n">latdct</span><span class="p">[</span><span class="n">lateral</span><span class="o">.</span><span class="n">code</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="s2">&quot;branchid&quot;</span><span class="p">:</span> <span class="n">lateral</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
                        <span class="s2">&quot;chainage&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">lateral</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">),</span>
                        <span class="s2">&quot;discharge&quot;</span><span class="p">:</span> <span class="n">series</span><span class="p">,</span>
                    <span class="p">}</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">lateral</span><span class="o">.</span><span class="n">code</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">lateral_discharges</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;No data found for </span><span class="si">{</span><span class="n">lateral</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s2">. Skipping.&quot;</span>
                        <span class="p">)</span>
                        <span class="k">continue</span>

                    <span class="c1"># Get timeseries</span>
                    <span class="n">series</span> <span class="o">=</span> <span class="n">lateral_discharges</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">lateral</span><span class="o">.</span><span class="n">code</span><span class="p">]</span>

                    <span class="c1"># Add to dictionary</span>
                    <span class="n">latdct</span><span class="p">[</span><span class="n">lateral</span><span class="o">.</span><span class="n">code</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="s2">&quot;branchid&quot;</span><span class="p">:</span> <span class="n">lateral</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
                        <span class="s2">&quot;chainage&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">lateral</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">),</span>
                        <span class="s2">&quot;discharge&quot;</span><span class="p">:</span> <span class="n">series</span><span class="p">,</span>
                    <span class="p">}</span>

    <span class="c1"># Add all items</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">latdct</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">external_forcings</span><span class="o">.</span><span class="n">add_lateral</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
            <span class="n">branchid</span><span class="o">=</span><span class="n">item</span><span class="p">[</span><span class="s2">&quot;branchid&quot;</span><span class="p">],</span>
            <span class="n">chainage</span><span class="o">=</span><span class="n">item</span><span class="p">[</span><span class="s2">&quot;chainage&quot;</span><span class="p">],</span>
            <span class="n">discharge</span><span class="o">=</span><span class="n">item</span><span class="p">[</span><span class="s2">&quot;discharge&quot;</span><span class="p">],</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>




  </div>

    </div>

</div>






<div class="doc doc-object doc-class">



<h3 id="hydrolib.dhydamo.converters.hydamo2df.StorageNodesIO" class="doc doc-heading">
            <code>StorageNodesIO</code>


<a href="#hydrolib.dhydamo.converters.hydamo2df.StorageNodesIO" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">









              <details class="quote">
                <summary>Source code in <code>hydrolib/dhydamo/converters/hydamo2df.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">StorageNodesIO</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">storagenodes</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">storagenodes</span> <span class="o">=</span> <span class="n">storagenodes</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">storagenodes_from_datamodel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">storagenodes</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; &quot;From parsed data model of storage nodes&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">storagenode_idx</span><span class="p">,</span> <span class="n">storagenode</span> <span class="ow">in</span> <span class="n">storagenodes</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_storagenode</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="n">storagenode</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="n">storagenode</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="s2">&quot;name&quot;</span> <span class="ow">in</span> <span class="n">storagenode</span><span class="o">.</span><span class="n">index</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">usestreetstorage</span><span class="o">=</span><span class="n">storagenode</span><span class="o">.</span><span class="n">usestreetstorage</span><span class="p">,</span>
                <span class="n">nodetype</span><span class="o">=</span><span class="s2">&quot;unspecified&quot;</span><span class="p">,</span>
                <span class="n">nodeid</span><span class="o">=</span><span class="n">storagenode</span><span class="o">.</span><span class="n">nodeid</span><span class="p">,</span>
                <span class="n">usetable</span><span class="o">=</span><span class="s2">&quot;false&quot;</span><span class="p">,</span>
                <span class="n">bedlevel</span><span class="o">=</span><span class="n">storagenode</span><span class="o">.</span><span class="n">bedlevel</span><span class="p">,</span>
                <span class="n">area</span><span class="o">=</span><span class="n">storagenode</span><span class="o">.</span><span class="n">area</span><span class="p">,</span>
                <span class="n">streetlevel</span><span class="o">=</span><span class="n">storagenode</span><span class="o">.</span><span class="n">streetlevel</span><span class="p">,</span>
                <span class="n">streetstoragearea</span><span class="o">=</span><span class="n">storagenode</span><span class="o">.</span><span class="n">streetstoragearea</span><span class="p">,</span>
                <span class="n">storagetype</span><span class="o">=</span><span class="n">storagenode</span><span class="o">.</span><span class="n">storagetype</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">storagenodes_from_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">storagenodes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nodeid</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">storagedata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">usestreetstorage</span><span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">network</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; &quot;From parsed data model of storage nodes&quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">storagenode_idx</span><span class="p">,</span> <span class="n">storagenode</span> <span class="ow">in</span> <span class="n">storagenodes</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">storagedata</span><span class="p">[</span><span class="n">storagedata</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="n">storagenode_idx</span><span class="p">]</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">storagenode</span><span class="o">.</span><span class="n">name</span>
            <span class="k">if</span> <span class="n">pd</span><span class="o">.</span><span class="n">isna</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">storagenode</span><span class="o">.</span><span class="n">code</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">storagenodes</span><span class="o">.</span><span class="n">add_storagenode</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="n">storagenode_idx</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                <span class="n">usestreetstorage</span><span class="o">=</span><span class="n">usestreetstorage</span><span class="p">,</span>
                <span class="n">nodetype</span><span class="o">=</span><span class="s2">&quot;unspecified&quot;</span><span class="p">,</span>
                <span class="n">nodeid</span><span class="o">=</span><span class="n">nodeid</span><span class="p">,</span>
                <span class="n">xy</span><span class="o">=</span><span class="n">xy</span><span class="p">,</span>
                <span class="n">branchid</span><span class="o">=</span><span class="n">storagenode</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
                <span class="n">chainage</span><span class="o">=</span><span class="n">storagenode</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">,</span>
                <span class="n">usetable</span><span class="o">=</span><span class="s2">&quot;true&quot;</span><span class="p">,</span>
                <span class="n">storagearea</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">area</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)),</span>
                <span class="n">levels</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">level</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)),</span>
                <span class="n">network</span><span class="o">=</span><span class="n">network</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-function">


<h4 id="hydrolib.dhydamo.converters.hydamo2df.StorageNodesIO.storagenodes_from_datamodel" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">storagenodes_from_datamodel</span><span class="p">(</span><span class="n">storagenodes</span><span class="p">)</span></code>

<a href="#hydrolib.dhydamo.converters.hydamo2df.StorageNodesIO.storagenodes_from_datamodel" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>"From parsed data model of storage nodes</p>


            <details class="quote">
              <summary>Source code in <code>hydrolib/dhydamo/converters/hydamo2df.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">storagenodes_from_datamodel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">storagenodes</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; &quot;From parsed data model of storage nodes&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">storagenode_idx</span><span class="p">,</span> <span class="n">storagenode</span> <span class="ow">in</span> <span class="n">storagenodes</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_storagenode</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">storagenode</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">storagenode</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="s2">&quot;name&quot;</span> <span class="ow">in</span> <span class="n">storagenode</span><span class="o">.</span><span class="n">index</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">usestreetstorage</span><span class="o">=</span><span class="n">storagenode</span><span class="o">.</span><span class="n">usestreetstorage</span><span class="p">,</span>
            <span class="n">nodetype</span><span class="o">=</span><span class="s2">&quot;unspecified&quot;</span><span class="p">,</span>
            <span class="n">nodeid</span><span class="o">=</span><span class="n">storagenode</span><span class="o">.</span><span class="n">nodeid</span><span class="p">,</span>
            <span class="n">usetable</span><span class="o">=</span><span class="s2">&quot;false&quot;</span><span class="p">,</span>
            <span class="n">bedlevel</span><span class="o">=</span><span class="n">storagenode</span><span class="o">.</span><span class="n">bedlevel</span><span class="p">,</span>
            <span class="n">area</span><span class="o">=</span><span class="n">storagenode</span><span class="o">.</span><span class="n">area</span><span class="p">,</span>
            <span class="n">streetlevel</span><span class="o">=</span><span class="n">storagenode</span><span class="o">.</span><span class="n">streetlevel</span><span class="p">,</span>
            <span class="n">streetstoragearea</span><span class="o">=</span><span class="n">storagenode</span><span class="o">.</span><span class="n">streetstoragearea</span><span class="p">,</span>
            <span class="n">storagetype</span><span class="o">=</span><span class="n">storagenode</span><span class="o">.</span><span class="n">storagetype</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h4 id="hydrolib.dhydamo.converters.hydamo2df.StorageNodesIO.storagenodes_from_input" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">storagenodes_from_input</span><span class="p">(</span><span class="n">storagenodes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nodeid</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">storagedata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">usestreetstorage</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">network</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#hydrolib.dhydamo.converters.hydamo2df.StorageNodesIO.storagenodes_from_input" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>"From parsed data model of storage nodes</p>


            <details class="quote">
              <summary>Source code in <code>hydrolib/dhydamo/converters/hydamo2df.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">storagenodes_from_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">storagenodes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nodeid</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">storagedata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">usestreetstorage</span><span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">network</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; &quot;From parsed data model of storage nodes&quot;&quot;&quot;</span>

    <span class="k">for</span> <span class="n">storagenode_idx</span><span class="p">,</span> <span class="n">storagenode</span> <span class="ow">in</span> <span class="n">storagenodes</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">storagedata</span><span class="p">[</span><span class="n">storagedata</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="n">storagenode_idx</span><span class="p">]</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">storagenode</span><span class="o">.</span><span class="n">name</span>
        <span class="k">if</span> <span class="n">pd</span><span class="o">.</span><span class="n">isna</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">storagenode</span><span class="o">.</span><span class="n">code</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">storagenodes</span><span class="o">.</span><span class="n">add_storagenode</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">storagenode_idx</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">usestreetstorage</span><span class="o">=</span><span class="n">usestreetstorage</span><span class="p">,</span>
            <span class="n">nodetype</span><span class="o">=</span><span class="s2">&quot;unspecified&quot;</span><span class="p">,</span>
            <span class="n">nodeid</span><span class="o">=</span><span class="n">nodeid</span><span class="p">,</span>
            <span class="n">xy</span><span class="o">=</span><span class="n">xy</span><span class="p">,</span>
            <span class="n">branchid</span><span class="o">=</span><span class="n">storagenode</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
            <span class="n">chainage</span><span class="o">=</span><span class="n">storagenode</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">,</span>
            <span class="n">usetable</span><span class="o">=</span><span class="s2">&quot;true&quot;</span><span class="p">,</span>
            <span class="n">storagearea</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">area</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)),</span>
            <span class="n">levels</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">level</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)),</span>
            <span class="n">network</span><span class="o">=</span><span class="n">network</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>




  </div>

    </div>

</div>






<div class="doc doc-object doc-class">



<h3 id="hydrolib.dhydamo.converters.hydamo2df.StructuresIO" class="doc doc-heading">
            <code>StructuresIO</code>


<a href="#hydrolib.dhydamo.converters.hydamo2df.StructuresIO" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">









              <details class="quote">
                <summary>Source code in <code>hydrolib/dhydamo/converters/hydamo2df.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 427</span>
<span class="normal"> 428</span>
<span class="normal"> 429</span>
<span class="normal"> 430</span>
<span class="normal"> 431</span>
<span class="normal"> 432</span>
<span class="normal"> 433</span>
<span class="normal"> 434</span>
<span class="normal"> 435</span>
<span class="normal"> 436</span>
<span class="normal"> 437</span>
<span class="normal"> 438</span>
<span class="normal"> 439</span>
<span class="normal"> 440</span>
<span class="normal"> 441</span>
<span class="normal"> 442</span>
<span class="normal"> 443</span>
<span class="normal"> 444</span>
<span class="normal"> 445</span>
<span class="normal"> 446</span>
<span class="normal"> 447</span>
<span class="normal"> 448</span>
<span class="normal"> 449</span>
<span class="normal"> 450</span>
<span class="normal"> 451</span>
<span class="normal"> 452</span>
<span class="normal"> 453</span>
<span class="normal"> 454</span>
<span class="normal"> 455</span>
<span class="normal"> 456</span>
<span class="normal"> 457</span>
<span class="normal"> 458</span>
<span class="normal"> 459</span>
<span class="normal"> 460</span>
<span class="normal"> 461</span>
<span class="normal"> 462</span>
<span class="normal"> 463</span>
<span class="normal"> 464</span>
<span class="normal"> 465</span>
<span class="normal"> 466</span>
<span class="normal"> 467</span>
<span class="normal"> 468</span>
<span class="normal"> 469</span>
<span class="normal"> 470</span>
<span class="normal"> 471</span>
<span class="normal"> 472</span>
<span class="normal"> 473</span>
<span class="normal"> 474</span>
<span class="normal"> 475</span>
<span class="normal"> 476</span>
<span class="normal"> 477</span>
<span class="normal"> 478</span>
<span class="normal"> 479</span>
<span class="normal"> 480</span>
<span class="normal"> 481</span>
<span class="normal"> 482</span>
<span class="normal"> 483</span>
<span class="normal"> 484</span>
<span class="normal"> 485</span>
<span class="normal"> 486</span>
<span class="normal"> 487</span>
<span class="normal"> 488</span>
<span class="normal"> 489</span>
<span class="normal"> 490</span>
<span class="normal"> 491</span>
<span class="normal"> 492</span>
<span class="normal"> 493</span>
<span class="normal"> 494</span>
<span class="normal"> 495</span>
<span class="normal"> 496</span>
<span class="normal"> 497</span>
<span class="normal"> 498</span>
<span class="normal"> 499</span>
<span class="normal"> 500</span>
<span class="normal"> 501</span>
<span class="normal"> 502</span>
<span class="normal"> 503</span>
<span class="normal"> 504</span>
<span class="normal"> 505</span>
<span class="normal"> 506</span>
<span class="normal"> 507</span>
<span class="normal"> 508</span>
<span class="normal"> 509</span>
<span class="normal"> 510</span>
<span class="normal"> 511</span>
<span class="normal"> 512</span>
<span class="normal"> 513</span>
<span class="normal"> 514</span>
<span class="normal"> 515</span>
<span class="normal"> 516</span>
<span class="normal"> 517</span>
<span class="normal"> 518</span>
<span class="normal"> 519</span>
<span class="normal"> 520</span>
<span class="normal"> 521</span>
<span class="normal"> 522</span>
<span class="normal"> 523</span>
<span class="normal"> 524</span>
<span class="normal"> 525</span>
<span class="normal"> 526</span>
<span class="normal"> 527</span>
<span class="normal"> 528</span>
<span class="normal"> 529</span>
<span class="normal"> 530</span>
<span class="normal"> 531</span>
<span class="normal"> 532</span>
<span class="normal"> 533</span>
<span class="normal"> 534</span>
<span class="normal"> 535</span>
<span class="normal"> 536</span>
<span class="normal"> 537</span>
<span class="normal"> 538</span>
<span class="normal"> 539</span>
<span class="normal"> 540</span>
<span class="normal"> 541</span>
<span class="normal"> 542</span>
<span class="normal"> 543</span>
<span class="normal"> 544</span>
<span class="normal"> 545</span>
<span class="normal"> 546</span>
<span class="normal"> 547</span>
<span class="normal"> 548</span>
<span class="normal"> 549</span>
<span class="normal"> 550</span>
<span class="normal"> 551</span>
<span class="normal"> 552</span>
<span class="normal"> 553</span>
<span class="normal"> 554</span>
<span class="normal"> 555</span>
<span class="normal"> 556</span>
<span class="normal"> 557</span>
<span class="normal"> 558</span>
<span class="normal"> 559</span>
<span class="normal"> 560</span>
<span class="normal"> 561</span>
<span class="normal"> 562</span>
<span class="normal"> 563</span>
<span class="normal"> 564</span>
<span class="normal"> 565</span>
<span class="normal"> 566</span>
<span class="normal"> 567</span>
<span class="normal"> 568</span>
<span class="normal"> 569</span>
<span class="normal"> 570</span>
<span class="normal"> 571</span>
<span class="normal"> 572</span>
<span class="normal"> 573</span>
<span class="normal"> 574</span>
<span class="normal"> 575</span>
<span class="normal"> 576</span>
<span class="normal"> 577</span>
<span class="normal"> 578</span>
<span class="normal"> 579</span>
<span class="normal"> 580</span>
<span class="normal"> 581</span>
<span class="normal"> 582</span>
<span class="normal"> 583</span>
<span class="normal"> 584</span>
<span class="normal"> 585</span>
<span class="normal"> 586</span>
<span class="normal"> 587</span>
<span class="normal"> 588</span>
<span class="normal"> 589</span>
<span class="normal"> 590</span>
<span class="normal"> 591</span>
<span class="normal"> 592</span>
<span class="normal"> 593</span>
<span class="normal"> 594</span>
<span class="normal"> 595</span>
<span class="normal"> 596</span>
<span class="normal"> 597</span>
<span class="normal"> 598</span>
<span class="normal"> 599</span>
<span class="normal"> 600</span>
<span class="normal"> 601</span>
<span class="normal"> 602</span>
<span class="normal"> 603</span>
<span class="normal"> 604</span>
<span class="normal"> 605</span>
<span class="normal"> 606</span>
<span class="normal"> 607</span>
<span class="normal"> 608</span>
<span class="normal"> 609</span>
<span class="normal"> 610</span>
<span class="normal"> 611</span>
<span class="normal"> 612</span>
<span class="normal"> 613</span>
<span class="normal"> 614</span>
<span class="normal"> 615</span>
<span class="normal"> 616</span>
<span class="normal"> 617</span>
<span class="normal"> 618</span>
<span class="normal"> 619</span>
<span class="normal"> 620</span>
<span class="normal"> 621</span>
<span class="normal"> 622</span>
<span class="normal"> 623</span>
<span class="normal"> 624</span>
<span class="normal"> 625</span>
<span class="normal"> 626</span>
<span class="normal"> 627</span>
<span class="normal"> 628</span>
<span class="normal"> 629</span>
<span class="normal"> 630</span>
<span class="normal"> 631</span>
<span class="normal"> 632</span>
<span class="normal"> 633</span>
<span class="normal"> 634</span>
<span class="normal"> 635</span>
<span class="normal"> 636</span>
<span class="normal"> 637</span>
<span class="normal"> 638</span>
<span class="normal"> 639</span>
<span class="normal"> 640</span>
<span class="normal"> 641</span>
<span class="normal"> 642</span>
<span class="normal"> 643</span>
<span class="normal"> 644</span>
<span class="normal"> 645</span>
<span class="normal"> 646</span>
<span class="normal"> 647</span>
<span class="normal"> 648</span>
<span class="normal"> 649</span>
<span class="normal"> 650</span>
<span class="normal"> 651</span>
<span class="normal"> 652</span>
<span class="normal"> 653</span>
<span class="normal"> 654</span>
<span class="normal"> 655</span>
<span class="normal"> 656</span>
<span class="normal"> 657</span>
<span class="normal"> 658</span>
<span class="normal"> 659</span>
<span class="normal"> 660</span>
<span class="normal"> 661</span>
<span class="normal"> 662</span>
<span class="normal"> 663</span>
<span class="normal"> 664</span>
<span class="normal"> 665</span>
<span class="normal"> 666</span>
<span class="normal"> 667</span>
<span class="normal"> 668</span>
<span class="normal"> 669</span>
<span class="normal"> 670</span>
<span class="normal"> 671</span>
<span class="normal"> 672</span>
<span class="normal"> 673</span>
<span class="normal"> 674</span>
<span class="normal"> 675</span>
<span class="normal"> 676</span>
<span class="normal"> 677</span>
<span class="normal"> 678</span>
<span class="normal"> 679</span>
<span class="normal"> 680</span>
<span class="normal"> 681</span>
<span class="normal"> 682</span>
<span class="normal"> 683</span>
<span class="normal"> 684</span>
<span class="normal"> 685</span>
<span class="normal"> 686</span>
<span class="normal"> 687</span>
<span class="normal"> 688</span>
<span class="normal"> 689</span>
<span class="normal"> 690</span>
<span class="normal"> 691</span>
<span class="normal"> 692</span>
<span class="normal"> 693</span>
<span class="normal"> 694</span>
<span class="normal"> 695</span>
<span class="normal"> 696</span>
<span class="normal"> 697</span>
<span class="normal"> 698</span>
<span class="normal"> 699</span>
<span class="normal"> 700</span>
<span class="normal"> 701</span>
<span class="normal"> 702</span>
<span class="normal"> 703</span>
<span class="normal"> 704</span>
<span class="normal"> 705</span>
<span class="normal"> 706</span>
<span class="normal"> 707</span>
<span class="normal"> 708</span>
<span class="normal"> 709</span>
<span class="normal"> 710</span>
<span class="normal"> 711</span>
<span class="normal"> 712</span>
<span class="normal"> 713</span>
<span class="normal"> 714</span>
<span class="normal"> 715</span>
<span class="normal"> 716</span>
<span class="normal"> 717</span>
<span class="normal"> 718</span>
<span class="normal"> 719</span>
<span class="normal"> 720</span>
<span class="normal"> 721</span>
<span class="normal"> 722</span>
<span class="normal"> 723</span>
<span class="normal"> 724</span>
<span class="normal"> 725</span>
<span class="normal"> 726</span>
<span class="normal"> 727</span>
<span class="normal"> 728</span>
<span class="normal"> 729</span>
<span class="normal"> 730</span>
<span class="normal"> 731</span>
<span class="normal"> 732</span>
<span class="normal"> 733</span>
<span class="normal"> 734</span>
<span class="normal"> 735</span>
<span class="normal"> 736</span>
<span class="normal"> 737</span>
<span class="normal"> 738</span>
<span class="normal"> 739</span>
<span class="normal"> 740</span>
<span class="normal"> 741</span>
<span class="normal"> 742</span>
<span class="normal"> 743</span>
<span class="normal"> 744</span>
<span class="normal"> 745</span>
<span class="normal"> 746</span>
<span class="normal"> 747</span>
<span class="normal"> 748</span>
<span class="normal"> 749</span>
<span class="normal"> 750</span>
<span class="normal"> 751</span>
<span class="normal"> 752</span>
<span class="normal"> 753</span>
<span class="normal"> 754</span>
<span class="normal"> 755</span>
<span class="normal"> 756</span>
<span class="normal"> 757</span>
<span class="normal"> 758</span>
<span class="normal"> 759</span>
<span class="normal"> 760</span>
<span class="normal"> 761</span>
<span class="normal"> 762</span>
<span class="normal"> 763</span>
<span class="normal"> 764</span>
<span class="normal"> 765</span>
<span class="normal"> 766</span>
<span class="normal"> 767</span>
<span class="normal"> 768</span>
<span class="normal"> 769</span>
<span class="normal"> 770</span>
<span class="normal"> 771</span>
<span class="normal"> 772</span>
<span class="normal"> 773</span>
<span class="normal"> 774</span>
<span class="normal"> 775</span>
<span class="normal"> 776</span>
<span class="normal"> 777</span>
<span class="normal"> 778</span>
<span class="normal"> 779</span>
<span class="normal"> 780</span>
<span class="normal"> 781</span>
<span class="normal"> 782</span>
<span class="normal"> 783</span>
<span class="normal"> 784</span>
<span class="normal"> 785</span>
<span class="normal"> 786</span>
<span class="normal"> 787</span>
<span class="normal"> 788</span>
<span class="normal"> 789</span>
<span class="normal"> 790</span>
<span class="normal"> 791</span>
<span class="normal"> 792</span>
<span class="normal"> 793</span>
<span class="normal"> 794</span>
<span class="normal"> 795</span>
<span class="normal"> 796</span>
<span class="normal"> 797</span>
<span class="normal"> 798</span>
<span class="normal"> 799</span>
<span class="normal"> 800</span>
<span class="normal"> 801</span>
<span class="normal"> 802</span>
<span class="normal"> 803</span>
<span class="normal"> 804</span>
<span class="normal"> 805</span>
<span class="normal"> 806</span>
<span class="normal"> 807</span>
<span class="normal"> 808</span>
<span class="normal"> 809</span>
<span class="normal"> 810</span>
<span class="normal"> 811</span>
<span class="normal"> 812</span>
<span class="normal"> 813</span>
<span class="normal"> 814</span>
<span class="normal"> 815</span>
<span class="normal"> 816</span>
<span class="normal"> 817</span>
<span class="normal"> 818</span>
<span class="normal"> 819</span>
<span class="normal"> 820</span>
<span class="normal"> 821</span>
<span class="normal"> 822</span>
<span class="normal"> 823</span>
<span class="normal"> 824</span>
<span class="normal"> 825</span>
<span class="normal"> 826</span>
<span class="normal"> 827</span>
<span class="normal"> 828</span>
<span class="normal"> 829</span>
<span class="normal"> 830</span>
<span class="normal"> 831</span>
<span class="normal"> 832</span>
<span class="normal"> 833</span>
<span class="normal"> 834</span>
<span class="normal"> 835</span>
<span class="normal"> 836</span>
<span class="normal"> 837</span>
<span class="normal"> 838</span>
<span class="normal"> 839</span>
<span class="normal"> 840</span>
<span class="normal"> 841</span>
<span class="normal"> 842</span>
<span class="normal"> 843</span>
<span class="normal"> 844</span>
<span class="normal"> 845</span>
<span class="normal"> 846</span>
<span class="normal"> 847</span>
<span class="normal"> 848</span>
<span class="normal"> 849</span>
<span class="normal"> 850</span>
<span class="normal"> 851</span>
<span class="normal"> 852</span>
<span class="normal"> 853</span>
<span class="normal"> 854</span>
<span class="normal"> 855</span>
<span class="normal"> 856</span>
<span class="normal"> 857</span>
<span class="normal"> 858</span>
<span class="normal"> 859</span>
<span class="normal"> 860</span>
<span class="normal"> 861</span>
<span class="normal"> 862</span>
<span class="normal"> 863</span>
<span class="normal"> 864</span>
<span class="normal"> 865</span>
<span class="normal"> 866</span>
<span class="normal"> 867</span>
<span class="normal"> 868</span>
<span class="normal"> 869</span>
<span class="normal"> 870</span>
<span class="normal"> 871</span>
<span class="normal"> 872</span>
<span class="normal"> 873</span>
<span class="normal"> 874</span>
<span class="normal"> 875</span>
<span class="normal"> 876</span>
<span class="normal"> 877</span>
<span class="normal"> 878</span>
<span class="normal"> 879</span>
<span class="normal"> 880</span>
<span class="normal"> 881</span>
<span class="normal"> 882</span>
<span class="normal"> 883</span>
<span class="normal"> 884</span>
<span class="normal"> 885</span>
<span class="normal"> 886</span>
<span class="normal"> 887</span>
<span class="normal"> 888</span>
<span class="normal"> 889</span>
<span class="normal"> 890</span>
<span class="normal"> 891</span>
<span class="normal"> 892</span>
<span class="normal"> 893</span>
<span class="normal"> 894</span>
<span class="normal"> 895</span>
<span class="normal"> 896</span>
<span class="normal"> 897</span>
<span class="normal"> 898</span>
<span class="normal"> 899</span>
<span class="normal"> 900</span>
<span class="normal"> 901</span>
<span class="normal"> 902</span>
<span class="normal"> 903</span>
<span class="normal"> 904</span>
<span class="normal"> 905</span>
<span class="normal"> 906</span>
<span class="normal"> 907</span>
<span class="normal"> 908</span>
<span class="normal"> 909</span>
<span class="normal"> 910</span>
<span class="normal"> 911</span>
<span class="normal"> 912</span>
<span class="normal"> 913</span>
<span class="normal"> 914</span>
<span class="normal"> 915</span>
<span class="normal"> 916</span>
<span class="normal"> 917</span>
<span class="normal"> 918</span>
<span class="normal"> 919</span>
<span class="normal"> 920</span>
<span class="normal"> 921</span>
<span class="normal"> 922</span>
<span class="normal"> 923</span>
<span class="normal"> 924</span>
<span class="normal"> 925</span>
<span class="normal"> 926</span>
<span class="normal"> 927</span>
<span class="normal"> 928</span>
<span class="normal"> 929</span>
<span class="normal"> 930</span>
<span class="normal"> 931</span>
<span class="normal"> 932</span>
<span class="normal"> 933</span>
<span class="normal"> 934</span>
<span class="normal"> 935</span>
<span class="normal"> 936</span>
<span class="normal"> 937</span>
<span class="normal"> 938</span>
<span class="normal"> 939</span>
<span class="normal"> 940</span>
<span class="normal"> 941</span>
<span class="normal"> 942</span>
<span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">StructuresIO</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">structures</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">structures</span> <span class="o">=</span> <span class="n">structures</span>

    <span class="nd">@validate_arguments</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">generalstructures_from_datamodel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">generalstructures</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;From parsed data model of orifices</span>

<span class="sd">        Args:</span>
<span class="sd">            generalstructures (pd.DataFrame): dataframe containing the data</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">generalstructure_idx</span><span class="p">,</span> <span class="n">generalstructure</span> <span class="ow">in</span> <span class="n">generalstructures</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_generalstructure</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">name</span>
                <span class="k">if</span> <span class="s2">&quot;name&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
                <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">branchid</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
                <span class="n">chainage</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">,</span>
                <span class="n">allowedflowdir</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
                <span class="n">upstream1width</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">upstream1width</span>
                <span class="k">if</span> <span class="s2">&quot;upstream1width&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
                <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">upstream1level</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">upstream1level</span>
                <span class="k">if</span> <span class="s2">&quot;upstream1level&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
                <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">upstream2width</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">upstream2width</span>
                <span class="k">if</span> <span class="s2">&quot;upstream2width&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
                <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">upstream2level</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">upstream2level</span>
                <span class="k">if</span> <span class="s2">&quot;upstream2level&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
                <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">crestwidth</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">crestwidth</span>
                <span class="k">if</span> <span class="s2">&quot;crestwidth&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
                <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">crestlevel</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">crestlevel</span>
                <span class="k">if</span> <span class="s2">&quot;crestlevel&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
                <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">crestlength</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">crestlength</span>
                <span class="k">if</span> <span class="s2">&quot;crestlength&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
                <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">downstream1width</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">downstream1width</span>
                <span class="k">if</span> <span class="s2">&quot;downstream1width&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
                <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">downstream1level</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">downstream1level</span>
                <span class="k">if</span> <span class="s2">&quot;downstream1level&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
                <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">downstream2width</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">downstream2width</span>
                <span class="k">if</span> <span class="s2">&quot;downstream2width&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
                <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">downstream2level</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">downstream2level</span>
                <span class="k">if</span> <span class="s2">&quot;downstream2level&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
                <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">gateloweredgelevel</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">gateloweredgelevel</span>
                <span class="k">if</span> <span class="s2">&quot;gateloweredgelevel&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
                <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">posfreegateflowcoeff</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">posfreegateflowcoeff</span>
                <span class="k">if</span> <span class="s2">&quot;posfreegateflowcoeff&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
                <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">posdrowngateflowcoeff</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">posdrowngateflowcoeff</span>
                <span class="k">if</span> <span class="s2">&quot;posdrowngateflowcoeff&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
                <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">posfreeweirflowcoeff</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">posfreeweirflowcoeff</span>
                <span class="k">if</span> <span class="s2">&quot;posfreeweirflowcoeff&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
                <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">posdrownweirflowcoeff</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">posdrownweirflowcoeff</span>
                <span class="k">if</span> <span class="s2">&quot;posdrownweirflowcoeff&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
                <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">poscontrcoeffreegate</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">poscontrcoeffreegate</span>
                <span class="k">if</span> <span class="s2">&quot;poscontrcoeffreegate&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
                <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">negfreegateflowcoeff</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">negfreegateflowcoeff</span>
                <span class="k">if</span> <span class="s2">&quot;negfreegateflowcoeff&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
                <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">negdrowngateflowcoeff</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">negdrowngateflowcoeff</span>
                <span class="k">if</span> <span class="s2">&quot;negdrowngateflowcoeff&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
                <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">negfreeweirflowcoeff</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">negfreeweirflowcoeff</span>
                <span class="k">if</span> <span class="s2">&quot;negfreeweirflowcoeff&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
                <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">negdrownweirflowcoeff</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">negdrownweirflowcoeff</span>
                <span class="k">if</span> <span class="s2">&quot;negdrownweirflowcoeff&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
                <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">negcontrcoeffreegate</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">negcontrcoeffreegate</span>
                <span class="k">if</span> <span class="s2">&quot;negcontrcoeffreegate&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
                <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">extraresistance</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">extraresistance</span>
                <span class="k">if</span> <span class="s2">&quot;extraresistance&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
                <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">gateheight</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">gateheight</span>
                <span class="k">if</span> <span class="s2">&quot;gateheight&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
                <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">gateopeningwidth</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">gateopeningwidth</span>
                <span class="k">if</span> <span class="s2">&quot;gateopeningwidth&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
                <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">gateopeninghorizontaldirection</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">gateopeninghorizontaldirection</span>
                <span class="k">if</span> <span class="s2">&quot;gateopeninghorizontaldirection&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
                <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">usevelocityheight</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">usevelocityheight</span>
                <span class="k">if</span> <span class="s2">&quot;usevelocityheight&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
                <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="nd">@validate_arguments</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">weirs</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">weirs</span><span class="p">:</span> <span class="n">ExtendedGeoDataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">profile_groups</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">profile_lines</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">profiles</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExtendedGeoDataFrame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">opening</span><span class="p">:</span> <span class="n">ExtendedDataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">management_device</span><span class="p">:</span> <span class="n">ExtendedDataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">usevelocityheight</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;true&quot;</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method to convert HyDAMO weirs to DFlowFM structures: regular weirs, orifices and universal weirs.</span>
<span class="sd">        If a weir ID corresponds to a &#39;stuwid&#39; in the profile_groups object, a universal weir is created.</span>
<span class="sd">        If the management_device corresponding to a weir has the field &quot;overlaatonderlaat&quot; set to &quot;onderlaat&#39;, an orifice is schematized. In all other cases, a regular (rectangular) weir is created.</span>

<span class="sd">        Parameters corrspond to the HyDAMO DAMO2.2 objects. DFlowFM keyword &#39;usevelocityheight&#39; can be specificied as a string, default is &#39;true&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># bypass HyDAMO and add stuwid directly to managment for use in RTC</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">hydamo</span><span class="o">.</span><span class="n">management</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">hydamo</span><span class="o">.</span><span class="n">management</span><span class="p">[</span><span class="s1">&#39;stuwid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">index</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">weirs</span><span class="o">.</span><span class="n">code</span><span class="p">)))</span>
        <span class="k">if</span> <span class="n">profile_groups</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">profile_groups</span><span class="p">,</span> <span class="s2">&quot;stuwid&quot;</span><span class="p">):</span>
            <span class="n">index</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">weirs</span><span class="o">.</span><span class="n">globalid</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">profile_groups</span><span class="o">.</span><span class="n">stuwid</span><span class="p">))]</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="n">rweirs</span> <span class="o">=</span> <span class="n">weirs</span><span class="p">[</span><span class="n">index</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">weir</span> <span class="ow">in</span> <span class="n">rweirs</span><span class="o">.</span><span class="n">itertuples</span><span class="p">():</span>
            <span class="n">weir_opening</span> <span class="o">=</span> <span class="n">opening</span><span class="p">[</span><span class="n">opening</span><span class="o">.</span><span class="n">stuwid</span> <span class="o">==</span> <span class="n">weir</span><span class="o">.</span><span class="n">globalid</span><span class="p">]</span>

            <span class="c1"># check if a separate name field is present</span>
            <span class="k">if</span> <span class="s2">&quot;naam&quot;</span> <span class="ow">in</span> <span class="n">weirs</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">weir</span><span class="o">.</span><span class="n">naam</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span><span class="p">:</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="n">weir</span><span class="o">.</span><span class="n">code</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">weir</span><span class="o">.</span><span class="n">code</span>

            <span class="k">if</span> <span class="n">weir_opening</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Weir </span><span class="si">{</span><span class="n">weir</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s1"> contains </span><span class="si">{</span><span class="n">weir_opening</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1"> openings. Creating a compound structure with a fictional weir for each one.&#39;</span><span class="p">)</span>
                <span class="n">cmp_list</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">num_op</span><span class="p">,</span> <span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">op_row</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">weir_opening</span><span class="o">.</span><span class="n">iterrows</span><span class="p">()):</span>
                    <span class="n">weir_mandev</span> <span class="o">=</span> <span class="n">management_device</span><span class="p">[</span>
                        <span class="n">management_device</span><span class="o">.</span><span class="n">kunstwerkopeningid</span>
                        <span class="o">==</span> <span class="n">op_row</span><span class="o">.</span><span class="n">globalid</span>
                    <span class="p">]</span>
                    <span class="n">weir_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">weir</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s1">_</span><span class="si">{</span><span class="n">num_op</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s1">&#39;</span>
                    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">hydamo</span><span class="o">.</span><span class="n">management</span><span class="o">.</span><span class="n">empty</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">hydamo</span><span class="o">.</span><span class="n">management</span><span class="p">,</span> <span class="s1">&#39;regelmiddelid&#39;</span><span class="p">)):</span>
                        <span class="k">if</span> <span class="n">weir_mandev</span><span class="o">.</span><span class="n">globalid</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">hydamo</span><span class="o">.</span><span class="n">management</span><span class="o">.</span><span class="n">regelmiddelid</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">():</span>
                            <span class="n">idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">hydamo</span><span class="o">.</span><span class="n">management</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">hydamo</span><span class="o">.</span><span class="n">management</span><span class="o">.</span><span class="n">regelmiddelid</span> <span class="o">==</span> <span class="n">weir_mandev</span><span class="o">.</span><span class="n">globalid</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()]</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">hydamo</span><span class="o">.</span><span class="n">management</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s1">&#39;stuwid&#39;</span><span class="p">]</span> <span class="o">=</span><span class="n">weir_id</span>
                    <span class="k">if</span> <span class="n">weir_mandev</span><span class="o">.</span><span class="n">overlaatonderlaat</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;overlaat&#39;</span><span class="p">:</span>
                        <span class="n">cmp_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">weir_id</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_rweir</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">weir_id</span><span class="p">,</span>
                                                    <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                                                    <span class="n">branchid</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
                                                    <span class="n">chainage</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">,</span>
                                                    <span class="n">crestlevel</span><span class="o">=</span><span class="n">op_row</span><span class="o">.</span><span class="n">laagstedoorstroomhoogte</span><span class="p">,</span>
                                                    <span class="n">crestwidth</span><span class="o">=</span><span class="n">op_row</span><span class="o">.</span><span class="n">laagstedoorstroombreedte</span><span class="p">,</span>
                                                    <span class="n">corrcoeff</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">afvoercoefficient</span><span class="p">,</span>
                                                    <span class="n">allowedflowdir</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
                                                    <span class="n">usevelocityheight</span><span class="o">=</span><span class="n">usevelocityheight</span><span class="p">,</span>
                                                 <span class="p">)</span>
                    <span class="k">elif</span> <span class="n">weir_mandev</span><span class="o">.</span><span class="n">overlaatonderlaat</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;onderlaat&#39;</span><span class="p">:</span>
                        <span class="n">cmp_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">weir_id</span><span class="p">)</span>
                        <span class="k">if</span> <span class="s2">&quot;maximaaldebiet&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">weir_mandev</span> <span class="ow">or</span> <span class="n">pd</span><span class="o">.</span><span class="n">isnull</span><span class="p">(</span><span class="n">weir_mandev</span><span class="o">.</span><span class="n">maximaaldebiet</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
                            <span class="n">limitflow</span> <span class="o">=</span> <span class="s2">&quot;false&quot;</span>
                            <span class="n">maxq</span> <span class="o">=</span> <span class="mf">0.0</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">limitflow</span> <span class="o">=</span> <span class="s2">&quot;true&quot;</span>
                            <span class="n">maxq</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">weir_mandev</span><span class="o">.</span><span class="n">maximaaldebiet</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_orifice</span><span class="p">(</span>
                            <span class="nb">id</span><span class="o">=</span><span class="n">weir_id</span><span class="p">,</span>
                            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                            <span class="n">branchid</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
                            <span class="n">chainage</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">,</span>
                            <span class="n">crestlevel</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">weir_opening</span><span class="o">.</span><span class="n">laagstedoorstroomhoogte</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                            <span class="n">crestwidth</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">weir_opening</span><span class="o">.</span><span class="n">laagstedoorstroombreedte</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                            <span class="n">corrcoeff</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">afvoercoefficient</span><span class="p">,</span>
                            <span class="n">allowedflowdir</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
                            <span class="n">usevelocityheight</span><span class="o">=</span><span class="n">usevelocityheight</span><span class="p">,</span>
                            <span class="n">gateloweredgelevel</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">weir_opening</span><span class="o">.</span><span class="n">laagstedoorstroomhoogte</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                            <span class="o">+</span> <span class="nb">float</span><span class="p">(</span><span class="n">weir_mandev</span><span class="o">.</span><span class="n">hoogteopening</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                            <span class="n">uselimitflowpos</span><span class="o">=</span><span class="n">limitflow</span><span class="p">,</span>
                            <span class="n">limitflowpos</span><span class="o">=</span><span class="n">maxq</span><span class="p">,</span>
                            <span class="n">uselimitflowneg</span><span class="o">=</span><span class="n">limitflow</span><span class="p">,</span>
                            <span class="n">limitflowneg</span><span class="o">=</span><span class="n">maxq</span><span class="p">,</span>
                        <span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Skipping </span><span class="si">{</span><span class="n">weir</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s1"> - from &quot;overlaatonderlaat&quot; </span><span class="si">{</span><span class="n">weir_mandev</span><span class="o">.</span><span class="n">overlaatonderlaat</span><span class="si">}</span><span class="s1"> the type of structure could not be determined.&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_compound</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;cmp_</span><span class="si">{</span><span class="n">weir</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">structureids</span> <span class="o">=</span><span class="n">cmp_list</span><span class="p">)</span>
                <span class="c1"># self.structures.rweirs_df.drop(weir.code)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">weir_opening</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Skipping </span><span class="si">{</span><span class="n">weir</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s1"> because there is no associated opening.&#39;</span><span class="p">)</span>
                    <span class="k">continue</span>

                <span class="n">weir_id</span> <span class="o">=</span> <span class="n">weir</span><span class="o">.</span><span class="n">code</span>
                <span class="n">weir_mandev</span> <span class="o">=</span> <span class="n">management_device</span><span class="p">[</span>
                        <span class="n">management_device</span><span class="o">.</span><span class="n">kunstwerkopeningid</span>
                        <span class="o">==</span> <span class="n">weir_opening</span><span class="o">.</span><span class="n">globalid</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="p">]</span>

                <span class="k">if</span> <span class="n">weir_mandev</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Skipping </span><span class="si">{</span><span class="n">weir</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s1"> because there is no associated management device.&#39;</span><span class="p">)</span>
                    <span class="k">continue</span>

                <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">hydamo</span><span class="o">.</span><span class="n">management</span><span class="o">.</span><span class="n">empty</span><span class="p">)</span> <span class="o">&amp;</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">hydamo</span><span class="o">.</span><span class="n">management</span><span class="p">,</span> <span class="s1">&#39;regelmiddelid&#39;</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">weir_mandev</span><span class="o">.</span><span class="n">globalid</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">hydamo</span><span class="o">.</span><span class="n">management</span><span class="o">.</span><span class="n">regelmiddelid</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">():</span>
                        <span class="n">idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">hydamo</span><span class="o">.</span><span class="n">management</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">hydamo</span><span class="o">.</span><span class="n">management</span><span class="o">.</span><span class="n">regelmiddelid</span> <span class="o">==</span> <span class="n">weir_mandev</span><span class="o">.</span><span class="n">globalid</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()]</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">hydamo</span><span class="o">.</span><span class="n">management</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s1">&#39;stuwid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">weir_id</span>


                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">weir_mandev</span><span class="o">.</span><span class="n">overlaatonderlaat</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                    <span class="n">overlaatonderlaat</span> <span class="o">=</span> <span class="n">weir_mandev</span><span class="o">.</span><span class="n">overlaatonderlaat</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">overlaatonderlaat</span> <span class="o">=</span> <span class="n">weir_mandev</span><span class="o">.</span><span class="n">overlaatonderlaat</span>

                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">overlaatonderlaat</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                    <span class="o">==</span> <span class="s2">&quot;overlaat&quot;</span>
                <span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_rweir</span><span class="p">(</span>
                        <span class="nb">id</span><span class="o">=</span><span class="n">weir_id</span><span class="p">,</span>
                        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                        <span class="n">branchid</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
                        <span class="n">chainage</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">,</span>
                        <span class="n">crestlevel</span><span class="o">=</span><span class="n">weir_opening</span><span class="o">.</span><span class="n">laagstedoorstroomhoogte</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                        <span class="n">crestwidth</span><span class="o">=</span><span class="n">weir_opening</span><span class="o">.</span><span class="n">laagstedoorstroombreedte</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                        <span class="n">corrcoeff</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">afvoercoefficient</span><span class="p">,</span>
                        <span class="n">allowedflowdir</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
                        <span class="n">usevelocityheight</span><span class="o">=</span><span class="n">usevelocityheight</span><span class="p">,</span>
                    <span class="p">)</span>

                <span class="k">elif</span> <span class="p">(</span>
                    <span class="n">overlaatonderlaat</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                    <span class="o">==</span> <span class="s2">&quot;onderlaat&quot;</span>
                <span class="p">):</span>
                    <span class="k">if</span> <span class="s2">&quot;maximaaldebiet&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">weir_mandev</span> <span class="ow">or</span> <span class="n">pd</span><span class="o">.</span><span class="n">isnull</span><span class="p">(</span><span class="n">weir_mandev</span><span class="o">.</span><span class="n">maximaaldebiet</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
                        <span class="n">limitflow</span> <span class="o">=</span> <span class="s2">&quot;false&quot;</span>
                        <span class="n">maxq</span> <span class="o">=</span> <span class="mf">0.0</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">limitflow</span> <span class="o">=</span> <span class="s2">&quot;true&quot;</span>
                        <span class="n">maxq</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">weir_mandev</span><span class="o">.</span><span class="n">maximaaldebiet</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_orifice</span><span class="p">(</span>
                        <span class="nb">id</span><span class="o">=</span><span class="n">weir_id</span><span class="p">,</span>
                        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                        <span class="n">branchid</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
                        <span class="n">chainage</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">,</span>
                        <span class="n">crestlevel</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">weir_opening</span><span class="o">.</span><span class="n">laagstedoorstroomhoogte</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                        <span class="n">crestwidth</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">weir_opening</span><span class="o">.</span><span class="n">laagstedoorstroombreedte</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                        <span class="n">corrcoeff</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">afvoercoefficient</span><span class="p">,</span>
                        <span class="n">allowedflowdir</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
                        <span class="n">usevelocityheight</span><span class="o">=</span><span class="n">usevelocityheight</span><span class="p">,</span>
                        <span class="n">gateloweredgelevel</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">weir_opening</span><span class="o">.</span><span class="n">laagstedoorstroomhoogte</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                        <span class="o">+</span> <span class="nb">float</span><span class="p">(</span><span class="n">weir_mandev</span><span class="o">.</span><span class="n">hoogteopening</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                        <span class="n">uselimitflowpos</span><span class="o">=</span><span class="n">limitflow</span><span class="p">,</span>
                        <span class="n">limitflowpos</span><span class="o">=</span><span class="n">maxq</span><span class="p">,</span>
                        <span class="n">uselimitflowneg</span><span class="o">=</span><span class="n">limitflow</span><span class="p">,</span>
                        <span class="n">limitflowneg</span><span class="o">=</span><span class="n">maxq</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Skipping </span><span class="si">{</span><span class="n">weir</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s1"> - from &quot;overlaatonderlaat&quot; </span><span class="si">{</span><span class="n">weir_mandev</span><span class="o">.</span><span class="n">overlaatonderlaat</span><span class="si">}</span><span class="s1"> the type of structure could not be determined.&#39;</span><span class="p">)</span>

        <span class="n">uweirs</span> <span class="o">=</span> <span class="n">weirs</span><span class="p">[</span><span class="n">index</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">uweir</span> <span class="ow">in</span> <span class="n">uweirs</span><span class="o">.</span><span class="n">itertuples</span><span class="p">():</span>
            <span class="c1"># check if a separate name field is present</span>
            <span class="k">if</span> <span class="s2">&quot;naam&quot;</span> <span class="ow">in</span> <span class="n">uweirs</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">uweir</span><span class="o">.</span><span class="n">naam</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">uweir</span><span class="o">.</span><span class="n">code</span>

            <span class="n">prof</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">profiles</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="s2">&quot;stuwid&quot;</span> <span class="ow">in</span> <span class="n">profile_groups</span><span class="p">):</span>
                <span class="n">group</span> <span class="o">=</span> <span class="n">profile_groups</span><span class="p">[</span><span class="n">profile_groups</span><span class="p">[</span><span class="s2">&quot;stuwid&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">uweir</span><span class="o">.</span><span class="n">globalid</span><span class="p">]</span>
                <span class="n">line</span> <span class="o">=</span> <span class="n">profile_lines</span><span class="p">[</span>
                    <span class="n">profile_lines</span><span class="p">[</span><span class="s2">&quot;profielgroepid&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">group</span><span class="p">[</span><span class="s2">&quot;globalid&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="p">]</span>
                <span class="n">prof</span> <span class="o">=</span> <span class="n">profiles</span><span class="p">[</span><span class="n">profiles</span><span class="p">[</span><span class="s2">&quot;profiellijnid&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">line</span><span class="p">[</span><span class="s2">&quot;globalid&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">prof</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
                    <span class="n">counts</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">prof</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span><span class="p">[:])</span>
                    <span class="n">xyz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">(</span><span class="n">prof</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span><span class="p">[:])</span>
                    <span class="n">length</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">r_</span><span class="p">[</span>
                        <span class="mi">0</span><span class="p">,</span>
                        <span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">hypot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">xyz</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">xyz</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]))),</span>
                    <span class="p">]</span>
                    <span class="n">yzvalues</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">c_</span><span class="p">[</span><span class="n">length</span><span class="p">,</span> <span class="n">xyz</span><span class="p">[:,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">xyz</span><span class="p">[:,</span> <span class="o">-</span><span class="mi">1</span><span class="p">])]</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">uweir</span><span class="p">,</span> <span class="s1">&#39;laagstedoorstroomhoogte&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">pd</span><span class="o">.</span><span class="n">isnull</span><span class="p">(</span><span class="n">uweir</span><span class="o">.</span><span class="n">laagstedoorstroomhoogte</span><span class="p">):</span>
                <span class="n">kruinhoogte</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">xyz</span><span class="p">[:,</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">kruinhoogte</span> <span class="o">=</span> <span class="n">uweir</span><span class="o">.</span><span class="n">laagstedoorstroomhoogte</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">prof</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c1"># return an error it is still not found</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">uweir</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s2"> is not found in any cross-section.&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_uweir</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="n">uweir</span><span class="o">.</span><span class="n">code</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                <span class="n">branchid</span><span class="o">=</span><span class="n">uweir</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
                <span class="n">chainage</span><span class="o">=</span><span class="n">uweir</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">,</span>
                <span class="n">crestlevel</span><span class="o">=</span><span class="n">kruinhoogte</span><span class="p">,</span>
                <span class="n">dischargecoeff</span><span class="o">=</span><span class="n">uweir</span><span class="o">.</span><span class="n">afvoercoefficient</span><span class="p">,</span>
                <span class="n">allowedflowdir</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
                <span class="n">numlevels</span><span class="o">=</span><span class="n">counts</span><span class="p">,</span>
                <span class="n">yvalues</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">yz</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">:</span><span class="s2">7.3f</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">yz</span> <span class="ow">in</span> <span class="n">yzvalues</span><span class="p">]),</span>
                <span class="n">zvalues</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">yz</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">7.3f</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">yz</span> <span class="ow">in</span> <span class="n">yzvalues</span><span class="p">]),</span>
            <span class="p">)</span>

    <span class="nd">@validate_arguments</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">weirs_from_datamodel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">weirs</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; &quot;From parsed data model of weirs&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">weir_idx</span><span class="p">,</span> <span class="n">weir</span> <span class="ow">in</span> <span class="n">weirs</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_weir</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="s2">&quot;name&quot;</span> <span class="ow">in</span> <span class="n">weir</span><span class="o">.</span><span class="n">index</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">branchid</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
                <span class="n">chainage</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">,</span>
                <span class="n">crestlevel</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">crestlevel</span><span class="p">,</span>
                <span class="n">crestwidth</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">crestwidth</span><span class="p">,</span>
                <span class="n">corrcoeff</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">corrcoeff</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="nd">@validate_arguments</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">orifices_from_datamodel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">orifices</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; &quot;From parsed data model of orifices&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">orifice_idx</span><span class="p">,</span> <span class="n">orifice</span> <span class="ow">in</span> <span class="n">orifices</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_orifice</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="n">orifice</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="n">orifice</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="s2">&quot;name&quot;</span> <span class="ow">in</span> <span class="n">orifice</span><span class="o">.</span><span class="n">index</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">branchid</span><span class="o">=</span><span class="n">orifice</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
                <span class="n">chainage</span><span class="o">=</span><span class="n">orifice</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">,</span>
                <span class="n">allowedflowdir</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
                <span class="n">crestlevel</span><span class="o">=</span><span class="n">orifice</span><span class="o">.</span><span class="n">crestlevel</span><span class="p">,</span>
                <span class="n">crestwidth</span><span class="o">=</span><span class="n">orifice</span><span class="o">.</span><span class="n">crestwidth</span><span class="p">,</span>
                <span class="n">gateloweredgelevel</span><span class="o">=</span><span class="n">orifice</span><span class="o">.</span><span class="n">gateloweredgelevel</span><span class="p">,</span>
                <span class="n">corrcoeff</span><span class="o">=</span><span class="n">orifice</span><span class="o">.</span><span class="n">corrcoef</span><span class="p">,</span>
                <span class="n">uselimitflowpos</span><span class="o">=</span><span class="n">orifice</span><span class="o">.</span><span class="n">uselimitflowpos</span><span class="p">,</span>
                <span class="n">limitflowpos</span><span class="o">=</span><span class="n">orifice</span><span class="o">.</span><span class="n">limitflowpos</span><span class="p">,</span>
                <span class="n">uselimitflowneg</span><span class="o">=</span><span class="n">orifice</span><span class="o">.</span><span class="n">uselimitflowneg</span><span class="p">,</span>
                <span class="n">limitflowneg</span><span class="o">=</span><span class="n">orifice</span><span class="o">.</span><span class="n">limitflowneg</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="nd">@validate_arguments</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">uweirs_from_datamodel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uweirs</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; &quot;From parsed data model of universal weirs&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">uweir_idx</span><span class="p">,</span> <span class="n">uweir</span> <span class="ow">in</span> <span class="n">uweirs</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_uweir</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="n">uweir</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="n">uweir</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="s2">&quot;name&quot;</span> <span class="ow">in</span> <span class="n">uweir</span><span class="o">.</span><span class="n">index</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">branchid</span><span class="o">=</span><span class="n">uweir</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
                <span class="n">chainage</span><span class="o">=</span><span class="n">uweir</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">,</span>
                <span class="n">crestlevel</span><span class="o">=</span><span class="n">uweir</span><span class="o">.</span><span class="n">crestlevel</span><span class="p">,</span>
                <span class="n">yvalues</span><span class="o">=</span><span class="n">uweir</span><span class="o">.</span><span class="n">yvalues</span><span class="p">,</span>
                <span class="n">zvalues</span><span class="o">=</span><span class="n">uweir</span><span class="o">.</span><span class="n">zvalues</span><span class="p">,</span>
                <span class="n">allowedflowdir</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
                <span class="n">dischargecoeff</span><span class="o">=</span><span class="n">uweir</span><span class="o">.</span><span class="n">dischargecoeff</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="nd">@validate_arguments</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">bridges</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">bridges</span><span class="p">:</span> <span class="n">ExtendedGeoDataFrame</span><span class="p">,</span>
        <span class="n">profile_groups</span><span class="p">:</span> <span class="n">ExtendedDataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">profile_lines</span><span class="p">:</span> <span class="n">ExtendedGeoDataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">profiles</span><span class="p">:</span> <span class="n">ExtendedGeoDataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method to convert HyDAMO bridges to DFlowFM bridges. Every bridge needs an associated YZ-profile through profile_groups (&#39;brugid&#39;), profile_lines and profiles.</span>

<span class="sd">        Parameters corrspond to the HyDAMO DAMO2.2 objects.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">bridge</span> <span class="ow">in</span> <span class="n">bridges</span><span class="o">.</span><span class="n">itertuples</span><span class="p">():</span>
            <span class="c1"># first search in yz-profiles</span>
            <span class="n">group</span> <span class="o">=</span> <span class="n">profile_groups</span><span class="p">[</span><span class="n">profile_groups</span><span class="p">[</span><span class="s2">&quot;brugid&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">bridge</span><span class="o">.</span><span class="n">globalid</span><span class="p">]</span>
            <span class="n">line</span> <span class="o">=</span> <span class="n">profile_lines</span><span class="p">[</span>
                <span class="n">profile_lines</span><span class="p">[</span><span class="s2">&quot;profielgroepid&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">group</span><span class="p">[</span><span class="s2">&quot;globalid&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="p">]</span>
            <span class="n">prof</span> <span class="o">=</span> <span class="n">profiles</span><span class="p">[</span><span class="n">profiles</span><span class="p">[</span><span class="s2">&quot;profiellijnid&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">line</span><span class="p">[</span><span class="s2">&quot;globalid&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">prof</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">bridge</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s2"> is not found in any cross-section.&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="s2">&quot;naam&quot;</span> <span class="ow">in</span> <span class="n">bridges</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">bridge</span><span class="o">.</span><span class="n">naam</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">bridge</span><span class="o">.</span><span class="n">code</span>

            <span class="n">profile_id</span> <span class="o">=</span> <span class="n">prof</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_bridge</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">code</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                <span class="n">branchid</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
                <span class="n">chainage</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">,</span>
                <span class="n">csdefid</span><span class="o">=</span><span class="n">profile_id</span><span class="p">,</span>
                <span class="n">shift</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
                <span class="n">allowedflowdir</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
                <span class="n">inletlosscoeff</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">intreeverlies</span><span class="p">,</span>
                <span class="n">outletlosscoeff</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">uittreeverlies</span><span class="p">,</span>
                <span class="n">length</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">lengte</span><span class="p">,</span>
                <span class="n">frictiontype</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">typeruwheid</span><span class="p">,</span>
                <span class="n">friction</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">ruwheid</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="nd">@validate_arguments</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">bridges_from_datamodel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bridges</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; &quot;From parsed data model of bridges&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">bridge_idx</span><span class="p">,</span> <span class="n">bridge</span> <span class="ow">in</span> <span class="n">bridges</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_bridge</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">code</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="s2">&quot;name&quot;</span> <span class="ow">in</span> <span class="n">bridge</span><span class="o">.</span><span class="n">index</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">branchid</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
                <span class="n">chainage</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">,</span>
                <span class="n">csdefid</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">csdefid</span><span class="p">,</span>
                <span class="n">shift</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
                <span class="n">allowedflowdir</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
                <span class="n">inletlosscoeff</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">intreeverlies</span><span class="p">,</span>
                <span class="n">outletlosscoeff</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">uittreeverlies</span><span class="p">,</span>
                <span class="n">length</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">lengte</span><span class="p">,</span>
                <span class="n">frictiontype</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">typeruwheid</span><span class="p">,</span>
                <span class="n">friction</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">ruwheid</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="nd">@validate_arguments</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">culverts</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">culverts</span><span class="p">:</span> <span class="n">ExtendedGeoDataFrame</span><span class="p">,</span>
        <span class="n">management_device</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExtendedDataFrame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method to convert HyDAMO culverts to DFlowFM culverts. Devices like a valve and a slide can be schematized from the management_device object.</span>
<span class="sd">        According to HyDAMO DAMO2.2 a closing_device (&#39;afsluitmiddel&#39;) could also be used but this is not supported.</span>

<span class="sd">        Parameters corrspond to the HyDAMO DAMO2.2 objects.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">management_device</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;soortafsluitmiddel&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">management_device</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
               <span class="n">management_device</span><span class="p">[</span><span class="s1">&#39;soortafsluitmiddel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">management_device</span><span class="p">[</span><span class="s1">&#39;soortregelmiddel&#39;</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">culvert</span> <span class="ow">in</span> <span class="n">culverts</span><span class="o">.</span><span class="n">itertuples</span><span class="p">():</span>
            <span class="c1"># Generate cross section definition name</span>
            <span class="k">if</span> <span class="n">culvert</span><span class="o">.</span><span class="n">vormkoker</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;rond&quot;</span> <span class="ow">or</span> <span class="n">culvert</span><span class="o">.</span><span class="n">vormkoker</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;ellipsvormig&quot;</span><span class="p">:</span>
                <span class="n">crosssection</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;shape&quot;</span><span class="p">:</span> <span class="s2">&quot;circle&quot;</span><span class="p">,</span> <span class="s2">&quot;diameter&quot;</span><span class="p">:</span> <span class="n">culvert</span><span class="o">.</span><span class="n">hoogteopening</span><span class="p">}</span>
            <span class="k">elif</span> <span class="p">(</span>
                <span class="n">culvert</span><span class="o">.</span><span class="n">vormkoker</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;rechthoekig&quot;</span>
                <span class="ow">or</span> <span class="n">culvert</span><span class="o">.</span><span class="n">vormkoker</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;onbekend&quot;</span>
                <span class="ow">or</span> <span class="n">culvert</span><span class="o">.</span><span class="n">vormkoker</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;eivormig&quot;</span>
                <span class="ow">or</span> <span class="n">culvert</span><span class="o">.</span><span class="n">vormkoker</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;muilprofiel&quot;</span>
                <span class="ow">or</span> <span class="n">culvert</span><span class="o">.</span><span class="n">vormkoker</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;heulprofiel&quot;</span>
            <span class="p">):</span>
                <span class="n">crosssection</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;shape&quot;</span><span class="p">:</span> <span class="s2">&quot;rectangle&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="n">culvert</span><span class="o">.</span><span class="n">hoogteopening</span><span class="p">,</span>
                    <span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="n">culvert</span><span class="o">.</span><span class="n">breedteopening</span><span class="p">,</span>
                    <span class="s2">&quot;closed&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="p">}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">crosssection</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;shape&quot;</span><span class="p">:</span> <span class="s2">&quot;circle&quot;</span><span class="p">,</span> <span class="s2">&quot;diameter&quot;</span><span class="p">:</span> <span class="mf">0.40</span><span class="p">}</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Culvert </span><span class="si">{</span><span class="n">culvert</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s2"> has an unknown shape: </span><span class="si">{</span><span class="n">culvert</span><span class="o">.</span><span class="n">vormkoker</span><span class="si">}</span><span class="s2">. Applying a default profile (round - 40cm)&quot;</span>
                <span class="p">)</span>

            <span class="c1"># check whether an afsluitmiddel is present and take action dependent on its settings</span>
            <span class="k">if</span> <span class="n">management_device</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">mandev</span> <span class="o">=</span> <span class="n">management_device</span><span class="p">[</span>
                    <span class="n">management_device</span><span class="o">.</span><span class="n">duikersifonhevelid</span> <span class="o">==</span> <span class="n">culvert</span><span class="o">.</span><span class="n">globalid</span>
                <span class="p">]</span>
                <span class="k">if</span> <span class="s1">&#39;soortafsluitmiddel&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">mandev</span><span class="p">:</span>
                    <span class="n">mandev</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mandev</span><span class="o">.</span><span class="n">index</span><span class="p">,</span><span class="s1">&#39;soortafsluitmiddel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mandev</span><span class="p">[</span><span class="s1">&#39;soortregelmiddel&#39;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">mandev</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">mandev</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
                <span class="n">allowedflowdir</span> <span class="o">=</span> <span class="s2">&quot;both&quot;</span>
                <span class="n">valveonoff</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">numlosscoeff</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">valveopeningheight</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">relopening</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">losscoeff</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">mandev</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">i</span><span class="p">[</span><span class="s2">&quot;soortafsluitmiddel&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;terugslagklep&quot;</span><span class="p">:</span>
                        <span class="n">allowedflowdir</span> <span class="o">=</span> <span class="s2">&quot;positive&quot;</span>
                        <span class="n">valveonoff</span> <span class="o">=</span> <span class="mi">0</span>
                        <span class="n">numlosscoeff</span> <span class="o">=</span> <span class="kc">None</span>
                        <span class="n">valveopeningheight</span> <span class="o">=</span> <span class="mi">0</span>
                        <span class="n">relopening</span> <span class="o">=</span> <span class="kc">None</span>
                        <span class="n">losscoeff</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="k">elif</span> <span class="n">i</span><span class="p">[</span><span class="s2">&quot;soortafsluitmiddel&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;schuif&quot;</span><span class="p">:</span>
                        <span class="n">allowedflowdir</span> <span class="o">=</span> <span class="s2">&quot;positive&quot;</span>
                        <span class="n">valveonoff</span> <span class="o">=</span> <span class="mi">1</span>
                        <span class="n">valveopeningheight</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="s2">&quot;hoogteopening&quot;</span><span class="p">])</span>
                        <span class="n">numlosscoeff</span> <span class="o">=</span> <span class="mi">1</span>
                        <span class="n">relopening</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="s2">&quot;hoogteopening&quot;</span><span class="p">])</span> <span class="o">/</span> <span class="n">culvert</span><span class="o">.</span><span class="n">hoogteopening</span><span class="p">]</span>
                        <span class="n">losscoeff</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="s2">&quot;afvoercoefficient&quot;</span><span class="p">])]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s1">&#39;Type of management device for culvert </span><span class="si">{</span><span class="n">culvert</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s1"> is not implemented; only &quot;schuif&quot; and &quot;terugslagklep&quot; are allowed.&#39;</span>
                        <span class="p">)</span>

            <span class="c1"># check if a separate name field is present</span>
            <span class="k">if</span> <span class="s2">&quot;naam&quot;</span> <span class="ow">in</span> <span class="n">culverts</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">culvert</span><span class="o">.</span><span class="n">naam</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">culvert</span><span class="o">.</span><span class="n">code</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_culvert</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">code</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                <span class="n">branchid</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
                <span class="n">chainage</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">,</span>
                <span class="n">leftlevel</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">hoogtebinnenonderkantbov</span><span class="p">,</span>
                <span class="n">rightlevel</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">hoogtebinnenonderkantbene</span><span class="p">,</span>
                <span class="n">length</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">lengte</span><span class="p">,</span>
                <span class="n">inletlosscoeff</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">intreeverlies</span><span class="p">,</span>
                <span class="n">outletlosscoeff</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">uittreeverlies</span><span class="p">,</span>
                <span class="n">crosssection</span><span class="o">=</span><span class="n">crosssection</span><span class="p">,</span>
                <span class="n">allowedflowdir</span><span class="o">=</span><span class="n">allowedflowdir</span><span class="p">,</span>
                <span class="n">valveonoff</span><span class="o">=</span><span class="n">valveonoff</span><span class="p">,</span>
                <span class="n">numlosscoeff</span><span class="o">=</span><span class="n">numlosscoeff</span><span class="p">,</span>
                <span class="n">valveopeningheight</span><span class="o">=</span><span class="n">valveopeningheight</span><span class="p">,</span>
                <span class="n">relopening</span><span class="o">=</span><span class="n">relopening</span><span class="p">,</span>
                <span class="n">losscoeff</span><span class="o">=</span><span class="n">losscoeff</span><span class="p">,</span>
                <span class="n">bedfrictiontype</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">typeruwheid</span><span class="p">,</span>
                <span class="n">bedfriction</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">ruwheid</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="nd">@validate_arguments</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">culverts_from_datamodel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">culverts</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        From parsed model of culverts</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Add to dict</span>
        <span class="k">for</span> <span class="n">culvert_idx</span><span class="p">,</span> <span class="n">culvert</span> <span class="ow">in</span> <span class="n">culverts</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_culvert</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="s2">&quot;name&quot;</span> <span class="ow">in</span> <span class="n">culvert</span><span class="o">.</span><span class="n">index</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">branchid</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
                <span class="n">chainage</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">,</span>
                <span class="n">leftlevel</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">leftlevel</span><span class="p">,</span>
                <span class="n">rightlevel</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">rightlevel</span><span class="p">,</span>
                <span class="n">crosssection</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">crosssectiondefinitionid</span><span class="p">,</span>
                <span class="n">length</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">length</span>
                <span class="k">if</span> <span class="s2">&quot;geometry&quot;</span> <span class="ow">in</span> <span class="n">culvert</span><span class="o">.</span><span class="n">index</span>
                <span class="k">else</span> <span class="n">culvert</span><span class="o">.</span><span class="n">length</span><span class="p">,</span>
                <span class="n">inletlosscoeff</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">inletlosscoeff</span><span class="p">,</span>
                <span class="n">outletlosscoeff</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">outletlosscoeff</span><span class="p">,</span>
                <span class="n">allowedflowdir</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
                <span class="n">valveonoff</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                <span class="n">numlosscoeff</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                <span class="n">valveopeningheight</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">relopening</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">losscoeff</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">frictiontype</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">frictiontype</span><span class="p">,</span>
                <span class="n">frictionvalue</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">frictionvalue</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="nd">@validate_arguments</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">pumps</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">pumpstations</span><span class="p">:</span> <span class="n">ExtendedGeoDataFrame</span><span class="p">,</span>
        <span class="n">pumps</span><span class="p">:</span> <span class="n">ExtendedDataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">management</span><span class="p">:</span> <span class="n">ExtendedDataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method to convert HyDAMO pumps to DFlowFM pumps. Three objects are required: pumpstations, pumps and management (&#39;sturing&#39;).</span>

<span class="sd">        Parameters corrspond to the HyDAMO DAMO2.2 objects.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Add sturing to pumps</span>
        <span class="k">for</span> <span class="n">pumpstation</span> <span class="ow">in</span> <span class="n">pumpstations</span><span class="o">.</span><span class="n">itertuples</span><span class="p">():</span>

            <span class="c1"># find pumps for gemaal</span>
            <span class="n">pumps_subset</span> <span class="o">=</span> <span class="n">pumps</span><span class="p">[</span><span class="n">pumps</span><span class="o">.</span><span class="n">gemaalid</span> <span class="o">==</span> <span class="n">pumpstation</span><span class="o">.</span><span class="n">globalid</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">pumps_subset</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Skipping </span><span class="si">{</span><span class="n">pumpstation</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s1"> because there is no associated pump.&#39;</span><span class="p">)</span>
                <span class="k">continue</span>

            <span class="k">if</span> <span class="s2">&quot;naam&quot;</span> <span class="ow">in</span> <span class="n">pumpstation</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">pumpstation</span><span class="o">.</span><span class="n">name</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">pumpstation</span><span class="o">.</span><span class="n">code</span>
            <span class="k">if</span> <span class="n">pumps_subset</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1"># more than one pump</span>
                <span class="n">cmp_list</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Pumpstation </span><span class="si">{</span><span class="n">pumpstation</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s1"> contains </span><span class="si">{</span><span class="n">pumps_subset</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1"> openings. Creating a compound structure with a fictional pump for each one.&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">ipump</span><span class="p">,</span> <span class="p">(</span><span class="n">_</span><span class="p">,</span><span class="n">pump</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pumps_subset</span><span class="o">.</span><span class="n">iterrows</span><span class="p">()):</span>

                    <span class="n">pump_control</span> <span class="o">=</span> <span class="n">management</span><span class="p">[</span><span class="n">management</span><span class="o">.</span><span class="n">pompid</span><span class="o">==</span> <span class="n">pump</span><span class="o">.</span><span class="n">globalid</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">pump_control</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;No management found for </span><span class="si">{</span><span class="n">pump</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="k">continue</span>

                    <span class="n">startlevelsuctionside</span> <span class="o">=</span> <span class="p">[</span><span class="n">pump_control</span><span class="p">[</span><span class="s2">&quot;bovengrens&quot;</span><span class="p">]]</span>
                    <span class="n">stoplevelsuctionside</span> <span class="o">=</span> <span class="p">[</span><span class="n">pump_control</span><span class="p">[</span><span class="s2">&quot;ondergrens&quot;</span><span class="p">]]</span>

                    <span class="n">pumpid</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">pumpstation</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s1">_</span><span class="si">{</span><span class="n">ipump</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s1">&#39;</span>
                    <span class="n">cmp_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pumpid</span><span class="p">)</span>

                    <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_pump</span><span class="p">(</span>
                        <span class="nb">id</span><span class="o">=</span><span class="n">pumpid</span><span class="p">,</span>
                        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                        <span class="n">branchid</span><span class="o">=</span><span class="n">pumpstation</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
                        <span class="n">chainage</span><span class="o">=</span><span class="n">pumpstation</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">,</span>
                        <span class="n">orientation</span><span class="o">=</span><span class="s2">&quot;positive&quot;</span><span class="p">,</span>
                        <span class="n">numstages</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                        <span class="n">controlside</span><span class="o">=</span><span class="s2">&quot;suctionside&quot;</span><span class="p">,</span>
                        <span class="n">capacity</span><span class="o">=</span><span class="n">pump</span><span class="o">.</span><span class="n">maximalecapaciteit</span><span class="o">/</span><span class="mf">60.</span><span class="p">,</span>
                        <span class="n">startlevelsuctionside</span><span class="o">=</span><span class="n">startlevelsuctionside</span><span class="p">,</span>
                        <span class="n">stoplevelsuctionside</span><span class="o">=</span><span class="n">stoplevelsuctionside</span><span class="p">,</span>
                        <span class="n">startleveldeliveryside</span><span class="o">=</span><span class="n">startlevelsuctionside</span><span class="p">,</span>
                        <span class="n">stopleveldeliveryside</span><span class="o">=</span><span class="n">stoplevelsuctionside</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_compound</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;cmp_</span><span class="si">{</span><span class="n">pumpstation</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">structureids</span> <span class="o">=</span><span class="n">cmp_list</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="c1">#  only one pump</span>
                <span class="n">pump_control</span> <span class="o">=</span> <span class="n">management</span><span class="p">[</span><span class="n">management</span><span class="o">.</span><span class="n">pompid</span><span class="o">==</span> <span class="n">pumps_subset</span><span class="o">.</span><span class="n">globalid</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
                <span class="k">if</span> <span class="n">pump_control</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Skipping </span><span class="si">{</span><span class="n">pumpstation</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s1"> because there is no associated management.&#39;</span><span class="p">)</span>

                <span class="n">startlevelsuctionside</span> <span class="o">=</span> <span class="p">[</span><span class="n">pump_control</span><span class="p">[</span><span class="s2">&quot;bovengrens&quot;</span><span class="p">]]</span>
                <span class="n">stoplevelsuctionside</span> <span class="o">=</span> <span class="p">[</span><span class="n">pump_control</span><span class="p">[</span><span class="s2">&quot;ondergrens&quot;</span><span class="p">]]</span>


                <span class="c1"># the pumpstation has only one pump</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_pump</span><span class="p">(</span>
                    <span class="nb">id</span><span class="o">=</span><span class="n">pumpstation</span><span class="o">.</span><span class="n">code</span><span class="p">,</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                    <span class="n">branchid</span><span class="o">=</span><span class="n">pumpstation</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
                    <span class="n">chainage</span><span class="o">=</span><span class="n">pumpstation</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">,</span>
                    <span class="n">orientation</span><span class="o">=</span><span class="s2">&quot;positive&quot;</span><span class="p">,</span>
                    <span class="n">numstages</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                    <span class="n">controlside</span><span class="o">=</span><span class="s2">&quot;suctionside&quot;</span><span class="p">,</span>
                    <span class="n">capacity</span><span class="o">=</span><span class="n">pumps_subset</span><span class="o">.</span><span class="n">maximalecapaciteit</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="mf">60.</span><span class="p">,</span>
                    <span class="n">startlevelsuctionside</span><span class="o">=</span><span class="n">startlevelsuctionside</span><span class="p">,</span>
                    <span class="n">stoplevelsuctionside</span><span class="o">=</span><span class="n">stoplevelsuctionside</span><span class="p">,</span>
                    <span class="n">startleveldeliveryside</span><span class="o">=</span><span class="n">startlevelsuctionside</span><span class="p">,</span>
                    <span class="n">stopleveldeliveryside</span><span class="o">=</span><span class="n">stoplevelsuctionside</span><span class="p">,</span>
                <span class="p">)</span>

    <span class="nd">@validate_arguments</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">pumps_from_datamodel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pumps</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;From parsed data model of pumps&quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">pump_idx</span><span class="p">,</span> <span class="n">pump</span> <span class="ow">in</span> <span class="n">pumps</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_pump</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="n">pump</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="n">pump</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="s2">&quot;name&quot;</span> <span class="ow">in</span> <span class="n">pump</span><span class="o">.</span><span class="n">index</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                <span class="n">branchid</span><span class="o">=</span><span class="n">pump</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
                <span class="n">chainage</span><span class="o">=</span><span class="n">pump</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">,</span>
                <span class="n">orientation</span><span class="o">=</span><span class="s2">&quot;positive&quot;</span><span class="p">,</span>
                <span class="n">numstages</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="n">controlside</span><span class="o">=</span><span class="n">pump</span><span class="o">.</span><span class="n">controlside</span><span class="p">,</span>
                <span class="n">capacity</span><span class="o">=</span><span class="n">pump</span><span class="o">.</span><span class="n">maximumcapacity</span><span class="p">,</span>
                <span class="n">startlevelsuctionside</span><span class="o">=</span><span class="n">pump</span><span class="o">.</span><span class="n">startlevelsuctionside</span><span class="p">,</span>
                <span class="n">stoplevelsuctionside</span><span class="o">=</span><span class="n">pump</span><span class="o">.</span><span class="n">stoplevelsuctionside</span><span class="p">,</span>
                <span class="n">startleveldeliveryside</span><span class="o">=</span><span class="n">pump</span><span class="o">.</span><span class="n">startleveldeliveryside</span><span class="p">,</span>
                <span class="n">stopleveldeliveryside</span><span class="o">=</span><span class="n">pump</span><span class="o">.</span><span class="n">stopleveldeliveryside</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">move_structure</span><span class="p">(</span><span class="n">struc</span><span class="p">,</span> <span class="n">struc_dict</span><span class="p">,</span> <span class="n">branch</span><span class="p">,</span> <span class="n">offset</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Function the move a structure if needed for a compound structure.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        struc : string</span>
<span class="sd">            current sub-structure id</span>
<span class="sd">        struc_dict : dict</span>
<span class="sd">            dict with all structures of a certain type</span>
<span class="sd">        branch : string</span>
<span class="sd">            branch id of the first structure in the compound</span>
<span class="sd">        offset : float</span>
<span class="sd">            chainage of the first structure in the compound</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Dict with shifted coordinates.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">branch2</span> <span class="o">=</span> <span class="n">struc_dict</span><span class="p">[</span><span class="n">struc</span><span class="p">][</span><span class="s2">&quot;branchid&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">branch2</span> <span class="o">!=</span> <span class="n">branch</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Structures of not on the same branche. Moving structure </span><span class="si">{</span><span class="n">struc</span><span class="si">}</span><span class="s2"> to branch </span><span class="si">{</span><span class="n">branch</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>
        <span class="n">struc_dict</span><span class="p">[</span><span class="n">struc</span><span class="p">][</span><span class="s2">&quot;branchid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">branch</span>
        <span class="n">struc_dict</span><span class="p">[</span><span class="n">struc</span><span class="p">][</span><span class="s2">&quot;chainage&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
        <span class="k">return</span> <span class="n">struc_dict</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">compound_structures</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idlist</span><span class="p">,</span> <span class="n">structurelist</span><span class="p">):</span>
        <span class="c1"># probably the coordinates should all be set to those of the first structure (still to do)</span>
        <span class="k">for</span> <span class="n">c_i</span><span class="p">,</span> <span class="n">c_id</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">idlist</span><span class="p">):</span>
            <span class="c1"># check the substructure coordinates. If they do not coincide, move subsequent structures to the coordinates of the first</span>
            <span class="k">for</span> <span class="n">s_i</span><span class="p">,</span> <span class="n">struc</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">structurelist</span><span class="p">[</span><span class="n">c_i</span><span class="p">]):</span>
                <span class="k">if</span> <span class="n">s_i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="c1"># find out what type the first structure it is and get its coordinates</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">pumps_df</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">struc</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">pumps_df</span><span class="o">.</span><span class="n">id</span><span class="p">):</span>
                            <span class="n">branch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">pumps_df</span><span class="p">[</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">pumps_df</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">struc</span>
                            <span class="p">]</span><span class="o">.</span><span class="n">branchid</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                            <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">pumps_df</span><span class="p">[</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">pumps_df</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">struc</span>
                            <span class="p">]</span><span class="o">.</span><span class="n">chainage</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">rweirs_df</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">struc</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">rweirs_df</span><span class="o">.</span><span class="n">id</span><span class="p">):</span>
                            <span class="n">branch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">rweirs_df</span><span class="p">[</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">rweirs_df</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">struc</span>
                            <span class="p">]</span><span class="o">.</span><span class="n">branchid</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                            <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">rweirs_df</span><span class="p">[</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">rweirs_df</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">struc</span>
                            <span class="p">]</span><span class="o">.</span><span class="n">chainage</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">uweirs_df</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">struc</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">uweirs_df</span><span class="o">.</span><span class="n">id</span><span class="p">):</span>
                            <span class="n">branch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">uweirs_df</span><span class="p">[</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">uweirs_df</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">struc</span>
                            <span class="p">]</span><span class="o">.</span><span class="n">branchid</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                            <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">uweirs_df</span><span class="p">[</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">uweirs_df</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">struc</span>
                            <span class="p">]</span><span class="o">.</span><span class="n">chainage</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">culverts_df</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">struc</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">culverts_df</span><span class="o">.</span><span class="n">id</span><span class="p">):</span>
                            <span class="n">branch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">culverts_df</span><span class="p">[</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">culverts_df</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">struc</span>
                            <span class="p">]</span><span class="o">.</span><span class="n">branchid</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                            <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">culverts_df</span><span class="p">[</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">culverts_df</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">struc</span>
                            <span class="p">]</span><span class="o">.</span><span class="n">chainage</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">bridges_df</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">struc</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">bridges_df</span><span class="o">.</span><span class="n">id</span><span class="p">):</span>
                            <span class="n">branch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">bridges_df</span><span class="p">[</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">bridges_df</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">struc</span>
                            <span class="p">]</span><span class="o">.</span><span class="n">branchid</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                            <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">bridges_df</span><span class="p">[</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">bridges_df</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">struc</span>
                            <span class="p">]</span><span class="o">.</span><span class="n">chainage</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">orifices_df</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">struc</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">orifices_df</span><span class="o">.</span><span class="n">id</span><span class="p">):</span>
                            <span class="n">branch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">orifices_df</span><span class="p">[</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">orifices_df</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">struc</span>
                            <span class="p">]</span><span class="o">.</span><span class="n">branchid</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                            <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">orifices_df</span><span class="p">[</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">orifices_df</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">struc</span>
                            <span class="p">]</span><span class="o">.</span><span class="n">chainage</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># move a subsequent structure to the location of the first</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">pumps_df</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">struc</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">pumps_df</span><span class="o">.</span><span class="n">id</span><span class="p">):</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">pumps_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">pumps_df</span><span class="p">[</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">pumps_df</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">struc</span>
                                <span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
                                <span class="s2">&quot;branchid&quot;</span><span class="p">,</span>
                            <span class="p">]</span> <span class="o">=</span> <span class="n">branch</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">pumps_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">pumps_df</span><span class="p">[</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">pumps_df</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">struc</span>
                                <span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
                                <span class="s2">&quot;chainage&quot;</span><span class="p">,</span>
                            <span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">rweirs_df</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">struc</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">rweirs_df</span><span class="o">.</span><span class="n">id</span><span class="p">):</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">rweirs_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">rweirs_df</span><span class="p">[</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">rweirs_df</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">struc</span>
                                <span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
                                <span class="s2">&quot;branchid&quot;</span><span class="p">,</span>
                            <span class="p">]</span> <span class="o">=</span> <span class="n">branch</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">rweirs_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">rweirs_df</span><span class="p">[</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">rweirs_df</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">struc</span>
                                <span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
                                <span class="s2">&quot;chainage&quot;</span><span class="p">,</span>
                            <span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">uweirs_df</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">struc</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">uweirs_df</span><span class="o">.</span><span class="n">id</span><span class="p">):</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">uweirs_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">uweirs_df</span><span class="p">[</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">uweirs_df</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">struc</span>
                                <span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
                                <span class="s2">&quot;branchid&quot;</span><span class="p">,</span>
                            <span class="p">]</span> <span class="o">=</span> <span class="n">branch</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">uweirs_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">uweirs_df</span><span class="p">[</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">uweirs_df</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">struc</span>
                                <span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
                                <span class="s2">&quot;chainage&quot;</span><span class="p">,</span>
                            <span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">culverts_df</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">struc</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">culverts_df</span><span class="o">.</span><span class="n">id</span><span class="p">):</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">culverts_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">culverts_df</span><span class="p">[</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">culverts_df</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">struc</span>
                                <span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
                                <span class="s2">&quot;branchid&quot;</span><span class="p">,</span>
                            <span class="p">]</span> <span class="o">=</span> <span class="n">branch</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">culverts_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">culverts_df</span><span class="p">[</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">culverts_df</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">struc</span>
                                <span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
                                <span class="s2">&quot;chainage&quot;</span><span class="p">,</span>
                            <span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">bridges_df</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">struc</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">bridges_df</span><span class="o">.</span><span class="n">id</span><span class="p">):</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">bridges_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">bridges_df</span><span class="p">[</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">bridges_df</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">struc</span>
                                <span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
                                <span class="s2">&quot;branchid&quot;</span><span class="p">,</span>
                            <span class="p">]</span> <span class="o">=</span> <span class="n">branch</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">bridges_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">bridges_df</span><span class="p">[</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">bridges_df</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">struc</span>
                                <span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
                                <span class="s2">&quot;chainage&quot;</span><span class="p">,</span>
                            <span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">orifices_df</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">struc</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">orifices_df</span><span class="o">.</span><span class="n">id</span><span class="p">):</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">orifices_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">orifices_df</span><span class="p">[</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">orifices_df</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">struc</span>
                                <span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
                                <span class="s2">&quot;branchid&quot;</span><span class="p">,</span>
                            <span class="p">]</span> <span class="o">=</span> <span class="n">branch</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">orifices_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">orifices_df</span><span class="p">[</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">orifices_df</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">struc</span>
                                <span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
                                <span class="s2">&quot;chainage&quot;</span><span class="p">,</span>
                            <span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_compound</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">c_id</span><span class="p">,</span> <span class="n">structureids</span><span class="o">=</span><span class="n">structurelist</span><span class="p">[</span><span class="n">c_i</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-function">


<h4 id="hydrolib.dhydamo.converters.hydamo2df.StructuresIO.bridges" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">bridges</span><span class="p">(</span><span class="n">bridges</span><span class="p">:</span> <span class="n">ExtendedGeoDataFrame</span><span class="p">,</span> <span class="n">profile_groups</span><span class="p">:</span> <span class="n">ExtendedDataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">profile_lines</span><span class="p">:</span> <span class="n">ExtendedGeoDataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">profiles</span><span class="p">:</span> <span class="n">ExtendedGeoDataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

<a href="#hydrolib.dhydamo.converters.hydamo2df.StructuresIO.bridges" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Method to convert HyDAMO bridges to DFlowFM bridges. Every bridge needs an associated YZ-profile through profile_groups ('brugid'), profile_lines and profiles.</p>
<p>Parameters corrspond to the HyDAMO DAMO2.2 objects.</p>


            <details class="quote">
              <summary>Source code in <code>hydrolib/dhydamo/converters/hydamo2df.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@validate_arguments</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">bridges</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">bridges</span><span class="p">:</span> <span class="n">ExtendedGeoDataFrame</span><span class="p">,</span>
    <span class="n">profile_groups</span><span class="p">:</span> <span class="n">ExtendedDataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">profile_lines</span><span class="p">:</span> <span class="n">ExtendedGeoDataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">profiles</span><span class="p">:</span> <span class="n">ExtendedGeoDataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method to convert HyDAMO bridges to DFlowFM bridges. Every bridge needs an associated YZ-profile through profile_groups (&#39;brugid&#39;), profile_lines and profiles.</span>

<span class="sd">    Parameters corrspond to the HyDAMO DAMO2.2 objects.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">bridge</span> <span class="ow">in</span> <span class="n">bridges</span><span class="o">.</span><span class="n">itertuples</span><span class="p">():</span>
        <span class="c1"># first search in yz-profiles</span>
        <span class="n">group</span> <span class="o">=</span> <span class="n">profile_groups</span><span class="p">[</span><span class="n">profile_groups</span><span class="p">[</span><span class="s2">&quot;brugid&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">bridge</span><span class="o">.</span><span class="n">globalid</span><span class="p">]</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">profile_lines</span><span class="p">[</span>
            <span class="n">profile_lines</span><span class="p">[</span><span class="s2">&quot;profielgroepid&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">group</span><span class="p">[</span><span class="s2">&quot;globalid&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="p">]</span>
        <span class="n">prof</span> <span class="o">=</span> <span class="n">profiles</span><span class="p">[</span><span class="n">profiles</span><span class="p">[</span><span class="s2">&quot;profiellijnid&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">line</span><span class="p">[</span><span class="s2">&quot;globalid&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">prof</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">bridge</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s2"> is not found in any cross-section.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;naam&quot;</span> <span class="ow">in</span> <span class="n">bridges</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">bridge</span><span class="o">.</span><span class="n">naam</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">bridge</span><span class="o">.</span><span class="n">code</span>

        <span class="n">profile_id</span> <span class="o">=</span> <span class="n">prof</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_bridge</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">code</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">branchid</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
            <span class="n">chainage</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">,</span>
            <span class="n">csdefid</span><span class="o">=</span><span class="n">profile_id</span><span class="p">,</span>
            <span class="n">shift</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="n">allowedflowdir</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
            <span class="n">inletlosscoeff</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">intreeverlies</span><span class="p">,</span>
            <span class="n">outletlosscoeff</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">uittreeverlies</span><span class="p">,</span>
            <span class="n">length</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">lengte</span><span class="p">,</span>
            <span class="n">frictiontype</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">typeruwheid</span><span class="p">,</span>
            <span class="n">friction</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">ruwheid</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h4 id="hydrolib.dhydamo.converters.hydamo2df.StructuresIO.bridges_from_datamodel" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">bridges_from_datamodel</span><span class="p">(</span><span class="n">bridges</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

<a href="#hydrolib.dhydamo.converters.hydamo2df.StructuresIO.bridges_from_datamodel" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>"From parsed data model of bridges</p>


            <details class="quote">
              <summary>Source code in <code>hydrolib/dhydamo/converters/hydamo2df.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@validate_arguments</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">bridges_from_datamodel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bridges</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; &quot;From parsed data model of bridges&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">bridge_idx</span><span class="p">,</span> <span class="n">bridge</span> <span class="ow">in</span> <span class="n">bridges</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_bridge</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">code</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="s2">&quot;name&quot;</span> <span class="ow">in</span> <span class="n">bridge</span><span class="o">.</span><span class="n">index</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">branchid</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
            <span class="n">chainage</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">,</span>
            <span class="n">csdefid</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">csdefid</span><span class="p">,</span>
            <span class="n">shift</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="n">allowedflowdir</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
            <span class="n">inletlosscoeff</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">intreeverlies</span><span class="p">,</span>
            <span class="n">outletlosscoeff</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">uittreeverlies</span><span class="p">,</span>
            <span class="n">length</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">lengte</span><span class="p">,</span>
            <span class="n">frictiontype</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">typeruwheid</span><span class="p">,</span>
            <span class="n">friction</span><span class="o">=</span><span class="n">bridge</span><span class="o">.</span><span class="n">ruwheid</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h4 id="hydrolib.dhydamo.converters.hydamo2df.StructuresIO.culverts" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">culverts</span><span class="p">(</span><span class="n">culverts</span><span class="p">:</span> <span class="n">ExtendedGeoDataFrame</span><span class="p">,</span> <span class="n">management_device</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExtendedDataFrame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

<a href="#hydrolib.dhydamo.converters.hydamo2df.StructuresIO.culverts" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Method to convert HyDAMO culverts to DFlowFM culverts. Devices like a valve and a slide can be schematized from the management_device object.
According to HyDAMO DAMO2.2 a closing_device ('afsluitmiddel') could also be used but this is not supported.</p>
<p>Parameters corrspond to the HyDAMO DAMO2.2 objects.</p>


            <details class="quote">
              <summary>Source code in <code>hydrolib/dhydamo/converters/hydamo2df.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span>
<span class="normal">942</span>
<span class="normal">943</span>
<span class="normal">944</span>
<span class="normal">945</span>
<span class="normal">946</span>
<span class="normal">947</span>
<span class="normal">948</span>
<span class="normal">949</span>
<span class="normal">950</span>
<span class="normal">951</span>
<span class="normal">952</span>
<span class="normal">953</span>
<span class="normal">954</span>
<span class="normal">955</span>
<span class="normal">956</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@validate_arguments</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">culverts</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">culverts</span><span class="p">:</span> <span class="n">ExtendedGeoDataFrame</span><span class="p">,</span>
    <span class="n">management_device</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExtendedDataFrame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method to convert HyDAMO culverts to DFlowFM culverts. Devices like a valve and a slide can be schematized from the management_device object.</span>
<span class="sd">    According to HyDAMO DAMO2.2 a closing_device (&#39;afsluitmiddel&#39;) could also be used but this is not supported.</span>

<span class="sd">    Parameters corrspond to the HyDAMO DAMO2.2 objects.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">management_device</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="s1">&#39;soortafsluitmiddel&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">management_device</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
           <span class="n">management_device</span><span class="p">[</span><span class="s1">&#39;soortafsluitmiddel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">management_device</span><span class="p">[</span><span class="s1">&#39;soortregelmiddel&#39;</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">culvert</span> <span class="ow">in</span> <span class="n">culverts</span><span class="o">.</span><span class="n">itertuples</span><span class="p">():</span>
        <span class="c1"># Generate cross section definition name</span>
        <span class="k">if</span> <span class="n">culvert</span><span class="o">.</span><span class="n">vormkoker</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;rond&quot;</span> <span class="ow">or</span> <span class="n">culvert</span><span class="o">.</span><span class="n">vormkoker</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;ellipsvormig&quot;</span><span class="p">:</span>
            <span class="n">crosssection</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;shape&quot;</span><span class="p">:</span> <span class="s2">&quot;circle&quot;</span><span class="p">,</span> <span class="s2">&quot;diameter&quot;</span><span class="p">:</span> <span class="n">culvert</span><span class="o">.</span><span class="n">hoogteopening</span><span class="p">}</span>
        <span class="k">elif</span> <span class="p">(</span>
            <span class="n">culvert</span><span class="o">.</span><span class="n">vormkoker</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;rechthoekig&quot;</span>
            <span class="ow">or</span> <span class="n">culvert</span><span class="o">.</span><span class="n">vormkoker</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;onbekend&quot;</span>
            <span class="ow">or</span> <span class="n">culvert</span><span class="o">.</span><span class="n">vormkoker</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;eivormig&quot;</span>
            <span class="ow">or</span> <span class="n">culvert</span><span class="o">.</span><span class="n">vormkoker</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;muilprofiel&quot;</span>
            <span class="ow">or</span> <span class="n">culvert</span><span class="o">.</span><span class="n">vormkoker</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;heulprofiel&quot;</span>
        <span class="p">):</span>
            <span class="n">crosssection</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;shape&quot;</span><span class="p">:</span> <span class="s2">&quot;rectangle&quot;</span><span class="p">,</span>
                <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="n">culvert</span><span class="o">.</span><span class="n">hoogteopening</span><span class="p">,</span>
                <span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="n">culvert</span><span class="o">.</span><span class="n">breedteopening</span><span class="p">,</span>
                <span class="s2">&quot;closed&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">crosssection</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;shape&quot;</span><span class="p">:</span> <span class="s2">&quot;circle&quot;</span><span class="p">,</span> <span class="s2">&quot;diameter&quot;</span><span class="p">:</span> <span class="mf">0.40</span><span class="p">}</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Culvert </span><span class="si">{</span><span class="n">culvert</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s2"> has an unknown shape: </span><span class="si">{</span><span class="n">culvert</span><span class="o">.</span><span class="n">vormkoker</span><span class="si">}</span><span class="s2">. Applying a default profile (round - 40cm)&quot;</span>
            <span class="p">)</span>

        <span class="c1"># check whether an afsluitmiddel is present and take action dependent on its settings</span>
        <span class="k">if</span> <span class="n">management_device</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">mandev</span> <span class="o">=</span> <span class="n">management_device</span><span class="p">[</span>
                <span class="n">management_device</span><span class="o">.</span><span class="n">duikersifonhevelid</span> <span class="o">==</span> <span class="n">culvert</span><span class="o">.</span><span class="n">globalid</span>
            <span class="p">]</span>
            <span class="k">if</span> <span class="s1">&#39;soortafsluitmiddel&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">mandev</span><span class="p">:</span>
                <span class="n">mandev</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mandev</span><span class="o">.</span><span class="n">index</span><span class="p">,</span><span class="s1">&#39;soortafsluitmiddel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mandev</span><span class="p">[</span><span class="s1">&#39;soortregelmiddel&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">mandev</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">mandev</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
            <span class="n">allowedflowdir</span> <span class="o">=</span> <span class="s2">&quot;both&quot;</span>
            <span class="n">valveonoff</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">numlosscoeff</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">valveopeningheight</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">relopening</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">losscoeff</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">mandev</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">i</span><span class="p">[</span><span class="s2">&quot;soortafsluitmiddel&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;terugslagklep&quot;</span><span class="p">:</span>
                    <span class="n">allowedflowdir</span> <span class="o">=</span> <span class="s2">&quot;positive&quot;</span>
                    <span class="n">valveonoff</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="n">numlosscoeff</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="n">valveopeningheight</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="n">relopening</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="n">losscoeff</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">elif</span> <span class="n">i</span><span class="p">[</span><span class="s2">&quot;soortafsluitmiddel&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;schuif&quot;</span><span class="p">:</span>
                    <span class="n">allowedflowdir</span> <span class="o">=</span> <span class="s2">&quot;positive&quot;</span>
                    <span class="n">valveonoff</span> <span class="o">=</span> <span class="mi">1</span>
                    <span class="n">valveopeningheight</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="s2">&quot;hoogteopening&quot;</span><span class="p">])</span>
                    <span class="n">numlosscoeff</span> <span class="o">=</span> <span class="mi">1</span>
                    <span class="n">relopening</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="s2">&quot;hoogteopening&quot;</span><span class="p">])</span> <span class="o">/</span> <span class="n">culvert</span><span class="o">.</span><span class="n">hoogteopening</span><span class="p">]</span>
                    <span class="n">losscoeff</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="s2">&quot;afvoercoefficient&quot;</span><span class="p">])]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s1">&#39;Type of management device for culvert </span><span class="si">{</span><span class="n">culvert</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s1"> is not implemented; only &quot;schuif&quot; and &quot;terugslagklep&quot; are allowed.&#39;</span>
                    <span class="p">)</span>

        <span class="c1"># check if a separate name field is present</span>
        <span class="k">if</span> <span class="s2">&quot;naam&quot;</span> <span class="ow">in</span> <span class="n">culverts</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">culvert</span><span class="o">.</span><span class="n">naam</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">culvert</span><span class="o">.</span><span class="n">code</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_culvert</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">code</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">branchid</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
            <span class="n">chainage</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">,</span>
            <span class="n">leftlevel</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">hoogtebinnenonderkantbov</span><span class="p">,</span>
            <span class="n">rightlevel</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">hoogtebinnenonderkantbene</span><span class="p">,</span>
            <span class="n">length</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">lengte</span><span class="p">,</span>
            <span class="n">inletlosscoeff</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">intreeverlies</span><span class="p">,</span>
            <span class="n">outletlosscoeff</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">uittreeverlies</span><span class="p">,</span>
            <span class="n">crosssection</span><span class="o">=</span><span class="n">crosssection</span><span class="p">,</span>
            <span class="n">allowedflowdir</span><span class="o">=</span><span class="n">allowedflowdir</span><span class="p">,</span>
            <span class="n">valveonoff</span><span class="o">=</span><span class="n">valveonoff</span><span class="p">,</span>
            <span class="n">numlosscoeff</span><span class="o">=</span><span class="n">numlosscoeff</span><span class="p">,</span>
            <span class="n">valveopeningheight</span><span class="o">=</span><span class="n">valveopeningheight</span><span class="p">,</span>
            <span class="n">relopening</span><span class="o">=</span><span class="n">relopening</span><span class="p">,</span>
            <span class="n">losscoeff</span><span class="o">=</span><span class="n">losscoeff</span><span class="p">,</span>
            <span class="n">bedfrictiontype</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">typeruwheid</span><span class="p">,</span>
            <span class="n">bedfriction</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">ruwheid</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h4 id="hydrolib.dhydamo.converters.hydamo2df.StructuresIO.culverts_from_datamodel" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">culverts_from_datamodel</span><span class="p">(</span><span class="n">culverts</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

<a href="#hydrolib.dhydamo.converters.hydamo2df.StructuresIO.culverts_from_datamodel" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>From parsed model of culverts</p>


            <details class="quote">
              <summary>Source code in <code>hydrolib/dhydamo/converters/hydamo2df.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">958</span>
<span class="normal">959</span>
<span class="normal">960</span>
<span class="normal">961</span>
<span class="normal">962</span>
<span class="normal">963</span>
<span class="normal">964</span>
<span class="normal">965</span>
<span class="normal">966</span>
<span class="normal">967</span>
<span class="normal">968</span>
<span class="normal">969</span>
<span class="normal">970</span>
<span class="normal">971</span>
<span class="normal">972</span>
<span class="normal">973</span>
<span class="normal">974</span>
<span class="normal">975</span>
<span class="normal">976</span>
<span class="normal">977</span>
<span class="normal">978</span>
<span class="normal">979</span>
<span class="normal">980</span>
<span class="normal">981</span>
<span class="normal">982</span>
<span class="normal">983</span>
<span class="normal">984</span>
<span class="normal">985</span>
<span class="normal">986</span>
<span class="normal">987</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@validate_arguments</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">culverts_from_datamodel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">culverts</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    From parsed model of culverts</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Add to dict</span>
    <span class="k">for</span> <span class="n">culvert_idx</span><span class="p">,</span> <span class="n">culvert</span> <span class="ow">in</span> <span class="n">culverts</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_culvert</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="s2">&quot;name&quot;</span> <span class="ow">in</span> <span class="n">culvert</span><span class="o">.</span><span class="n">index</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">branchid</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
            <span class="n">chainage</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">,</span>
            <span class="n">leftlevel</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">leftlevel</span><span class="p">,</span>
            <span class="n">rightlevel</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">rightlevel</span><span class="p">,</span>
            <span class="n">crosssection</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">crosssectiondefinitionid</span><span class="p">,</span>
            <span class="n">length</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">length</span>
            <span class="k">if</span> <span class="s2">&quot;geometry&quot;</span> <span class="ow">in</span> <span class="n">culvert</span><span class="o">.</span><span class="n">index</span>
            <span class="k">else</span> <span class="n">culvert</span><span class="o">.</span><span class="n">length</span><span class="p">,</span>
            <span class="n">inletlosscoeff</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">inletlosscoeff</span><span class="p">,</span>
            <span class="n">outletlosscoeff</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">outletlosscoeff</span><span class="p">,</span>
            <span class="n">allowedflowdir</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
            <span class="n">valveonoff</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">numlosscoeff</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">valveopeningheight</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">relopening</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">losscoeff</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">frictiontype</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">frictiontype</span><span class="p">,</span>
            <span class="n">frictionvalue</span><span class="o">=</span><span class="n">culvert</span><span class="o">.</span><span class="n">frictionvalue</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h4 id="hydrolib.dhydamo.converters.hydamo2df.StructuresIO.generalstructures_from_datamodel" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">generalstructures_from_datamodel</span><span class="p">(</span><span class="n">generalstructures</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

<a href="#hydrolib.dhydamo.converters.hydamo2df.StructuresIO.generalstructures_from_datamodel" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>From parsed data model of orifices</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>generalstructures</code>
            </td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dataframe containing the data</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>hydrolib/dhydamo/converters/hydamo2df.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@validate_arguments</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">generalstructures_from_datamodel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">generalstructures</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;From parsed data model of orifices</span>

<span class="sd">    Args:</span>
<span class="sd">        generalstructures (pd.DataFrame): dataframe containing the data</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">for</span> <span class="n">generalstructure_idx</span><span class="p">,</span> <span class="n">generalstructure</span> <span class="ow">in</span> <span class="n">generalstructures</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_generalstructure</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">name</span>
            <span class="k">if</span> <span class="s2">&quot;name&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
            <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">branchid</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
            <span class="n">chainage</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">,</span>
            <span class="n">allowedflowdir</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
            <span class="n">upstream1width</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">upstream1width</span>
            <span class="k">if</span> <span class="s2">&quot;upstream1width&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
            <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">upstream1level</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">upstream1level</span>
            <span class="k">if</span> <span class="s2">&quot;upstream1level&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
            <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">upstream2width</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">upstream2width</span>
            <span class="k">if</span> <span class="s2">&quot;upstream2width&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
            <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">upstream2level</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">upstream2level</span>
            <span class="k">if</span> <span class="s2">&quot;upstream2level&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
            <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">crestwidth</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">crestwidth</span>
            <span class="k">if</span> <span class="s2">&quot;crestwidth&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
            <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">crestlevel</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">crestlevel</span>
            <span class="k">if</span> <span class="s2">&quot;crestlevel&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
            <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">crestlength</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">crestlength</span>
            <span class="k">if</span> <span class="s2">&quot;crestlength&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
            <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">downstream1width</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">downstream1width</span>
            <span class="k">if</span> <span class="s2">&quot;downstream1width&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
            <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">downstream1level</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">downstream1level</span>
            <span class="k">if</span> <span class="s2">&quot;downstream1level&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
            <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">downstream2width</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">downstream2width</span>
            <span class="k">if</span> <span class="s2">&quot;downstream2width&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
            <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">downstream2level</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">downstream2level</span>
            <span class="k">if</span> <span class="s2">&quot;downstream2level&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
            <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">gateloweredgelevel</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">gateloweredgelevel</span>
            <span class="k">if</span> <span class="s2">&quot;gateloweredgelevel&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
            <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">posfreegateflowcoeff</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">posfreegateflowcoeff</span>
            <span class="k">if</span> <span class="s2">&quot;posfreegateflowcoeff&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
            <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">posdrowngateflowcoeff</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">posdrowngateflowcoeff</span>
            <span class="k">if</span> <span class="s2">&quot;posdrowngateflowcoeff&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
            <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">posfreeweirflowcoeff</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">posfreeweirflowcoeff</span>
            <span class="k">if</span> <span class="s2">&quot;posfreeweirflowcoeff&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
            <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">posdrownweirflowcoeff</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">posdrownweirflowcoeff</span>
            <span class="k">if</span> <span class="s2">&quot;posdrownweirflowcoeff&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
            <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">poscontrcoeffreegate</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">poscontrcoeffreegate</span>
            <span class="k">if</span> <span class="s2">&quot;poscontrcoeffreegate&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
            <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">negfreegateflowcoeff</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">negfreegateflowcoeff</span>
            <span class="k">if</span> <span class="s2">&quot;negfreegateflowcoeff&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
            <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">negdrowngateflowcoeff</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">negdrowngateflowcoeff</span>
            <span class="k">if</span> <span class="s2">&quot;negdrowngateflowcoeff&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
            <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">negfreeweirflowcoeff</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">negfreeweirflowcoeff</span>
            <span class="k">if</span> <span class="s2">&quot;negfreeweirflowcoeff&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
            <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">negdrownweirflowcoeff</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">negdrownweirflowcoeff</span>
            <span class="k">if</span> <span class="s2">&quot;negdrownweirflowcoeff&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
            <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">negcontrcoeffreegate</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">negcontrcoeffreegate</span>
            <span class="k">if</span> <span class="s2">&quot;negcontrcoeffreegate&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
            <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">extraresistance</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">extraresistance</span>
            <span class="k">if</span> <span class="s2">&quot;extraresistance&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
            <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">gateheight</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">gateheight</span>
            <span class="k">if</span> <span class="s2">&quot;gateheight&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
            <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">gateopeningwidth</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">gateopeningwidth</span>
            <span class="k">if</span> <span class="s2">&quot;gateopeningwidth&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
            <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">gateopeninghorizontaldirection</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">gateopeninghorizontaldirection</span>
            <span class="k">if</span> <span class="s2">&quot;gateopeninghorizontaldirection&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
            <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">usevelocityheight</span><span class="o">=</span><span class="n">generalstructure</span><span class="o">.</span><span class="n">usevelocityheight</span>
            <span class="k">if</span> <span class="s2">&quot;usevelocityheight&quot;</span> <span class="ow">in</span> <span class="n">generalstructure</span><span class="o">.</span><span class="n">index</span>
            <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h4 id="hydrolib.dhydamo.converters.hydamo2df.StructuresIO.move_structure" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">move_structure</span><span class="p">(</span><span class="n">struc</span><span class="p">,</span> <span class="n">struc_dict</span><span class="p">,</span> <span class="n">branch</span><span class="p">,</span> <span class="n">offset</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#hydrolib.dhydamo.converters.hydamo2df.StructuresIO.move_structure" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Function the move a structure if needed for a compound structure.</p>
<h6 id="hydrolib.dhydamo.converters.hydamo2df.StructuresIO.move_structure--parameters">Parameters<a class="headerlink" href="#hydrolib.dhydamo.converters.hydamo2df.StructuresIO.move_structure--parameters" title="Permanent link">&para;</a></h6>
<p>struc : string
    current sub-structure id
struc_dict : dict
    dict with all structures of a certain type
branch : string
    branch id of the first structure in the compound
offset : float
    chainage of the first structure in the compound</p>
<h6 id="hydrolib.dhydamo.converters.hydamo2df.StructuresIO.move_structure--returns">Returns<a class="headerlink" href="#hydrolib.dhydamo.converters.hydamo2df.StructuresIO.move_structure--returns" title="Permanent link">&para;</a></h6>
<p>Dict with shifted coordinates.</p>


            <details class="quote">
              <summary>Source code in <code>hydrolib/dhydamo/converters/hydamo2df.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">move_structure</span><span class="p">(</span><span class="n">struc</span><span class="p">,</span> <span class="n">struc_dict</span><span class="p">,</span> <span class="n">branch</span><span class="p">,</span> <span class="n">offset</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Function the move a structure if needed for a compound structure.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    struc : string</span>
<span class="sd">        current sub-structure id</span>
<span class="sd">    struc_dict : dict</span>
<span class="sd">        dict with all structures of a certain type</span>
<span class="sd">    branch : string</span>
<span class="sd">        branch id of the first structure in the compound</span>
<span class="sd">    offset : float</span>
<span class="sd">        chainage of the first structure in the compound</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Dict with shifted coordinates.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">branch2</span> <span class="o">=</span> <span class="n">struc_dict</span><span class="p">[</span><span class="n">struc</span><span class="p">][</span><span class="s2">&quot;branchid&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">branch2</span> <span class="o">!=</span> <span class="n">branch</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Structures of not on the same branche. Moving structure </span><span class="si">{</span><span class="n">struc</span><span class="si">}</span><span class="s2"> to branch </span><span class="si">{</span><span class="n">branch</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>
    <span class="n">struc_dict</span><span class="p">[</span><span class="n">struc</span><span class="p">][</span><span class="s2">&quot;branchid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">branch</span>
    <span class="n">struc_dict</span><span class="p">[</span><span class="n">struc</span><span class="p">][</span><span class="s2">&quot;chainage&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
    <span class="k">return</span> <span class="n">struc_dict</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h4 id="hydrolib.dhydamo.converters.hydamo2df.StructuresIO.orifices_from_datamodel" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">orifices_from_datamodel</span><span class="p">(</span><span class="n">orifices</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

<a href="#hydrolib.dhydamo.converters.hydamo2df.StructuresIO.orifices_from_datamodel" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>"From parsed data model of orifices</p>


            <details class="quote">
              <summary>Source code in <code>hydrolib/dhydamo/converters/hydamo2df.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@validate_arguments</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">orifices_from_datamodel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">orifices</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; &quot;From parsed data model of orifices&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">orifice_idx</span><span class="p">,</span> <span class="n">orifice</span> <span class="ow">in</span> <span class="n">orifices</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_orifice</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">orifice</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">orifice</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="s2">&quot;name&quot;</span> <span class="ow">in</span> <span class="n">orifice</span><span class="o">.</span><span class="n">index</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">branchid</span><span class="o">=</span><span class="n">orifice</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
            <span class="n">chainage</span><span class="o">=</span><span class="n">orifice</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">,</span>
            <span class="n">allowedflowdir</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
            <span class="n">crestlevel</span><span class="o">=</span><span class="n">orifice</span><span class="o">.</span><span class="n">crestlevel</span><span class="p">,</span>
            <span class="n">crestwidth</span><span class="o">=</span><span class="n">orifice</span><span class="o">.</span><span class="n">crestwidth</span><span class="p">,</span>
            <span class="n">gateloweredgelevel</span><span class="o">=</span><span class="n">orifice</span><span class="o">.</span><span class="n">gateloweredgelevel</span><span class="p">,</span>
            <span class="n">corrcoeff</span><span class="o">=</span><span class="n">orifice</span><span class="o">.</span><span class="n">corrcoef</span><span class="p">,</span>
            <span class="n">uselimitflowpos</span><span class="o">=</span><span class="n">orifice</span><span class="o">.</span><span class="n">uselimitflowpos</span><span class="p">,</span>
            <span class="n">limitflowpos</span><span class="o">=</span><span class="n">orifice</span><span class="o">.</span><span class="n">limitflowpos</span><span class="p">,</span>
            <span class="n">uselimitflowneg</span><span class="o">=</span><span class="n">orifice</span><span class="o">.</span><span class="n">uselimitflowneg</span><span class="p">,</span>
            <span class="n">limitflowneg</span><span class="o">=</span><span class="n">orifice</span><span class="o">.</span><span class="n">limitflowneg</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h4 id="hydrolib.dhydamo.converters.hydamo2df.StructuresIO.pumps" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">pumps</span><span class="p">(</span><span class="n">pumpstations</span><span class="p">:</span> <span class="n">ExtendedGeoDataFrame</span><span class="p">,</span> <span class="n">pumps</span><span class="p">:</span> <span class="n">ExtendedDataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">management</span><span class="p">:</span> <span class="n">ExtendedDataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

<a href="#hydrolib.dhydamo.converters.hydamo2df.StructuresIO.pumps" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Method to convert HyDAMO pumps to DFlowFM pumps. Three objects are required: pumpstations, pumps and management ('sturing').</p>
<p>Parameters corrspond to the HyDAMO DAMO2.2 objects.</p>


            <details class="quote">
              <summary>Source code in <code>hydrolib/dhydamo/converters/hydamo2df.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@validate_arguments</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">pumps</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">pumpstations</span><span class="p">:</span> <span class="n">ExtendedGeoDataFrame</span><span class="p">,</span>
    <span class="n">pumps</span><span class="p">:</span> <span class="n">ExtendedDataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">management</span><span class="p">:</span> <span class="n">ExtendedDataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method to convert HyDAMO pumps to DFlowFM pumps. Three objects are required: pumpstations, pumps and management (&#39;sturing&#39;).</span>

<span class="sd">    Parameters corrspond to the HyDAMO DAMO2.2 objects.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Add sturing to pumps</span>
    <span class="k">for</span> <span class="n">pumpstation</span> <span class="ow">in</span> <span class="n">pumpstations</span><span class="o">.</span><span class="n">itertuples</span><span class="p">():</span>

        <span class="c1"># find pumps for gemaal</span>
        <span class="n">pumps_subset</span> <span class="o">=</span> <span class="n">pumps</span><span class="p">[</span><span class="n">pumps</span><span class="o">.</span><span class="n">gemaalid</span> <span class="o">==</span> <span class="n">pumpstation</span><span class="o">.</span><span class="n">globalid</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">pumps_subset</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Skipping </span><span class="si">{</span><span class="n">pumpstation</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s1"> because there is no associated pump.&#39;</span><span class="p">)</span>
            <span class="k">continue</span>

        <span class="k">if</span> <span class="s2">&quot;naam&quot;</span> <span class="ow">in</span> <span class="n">pumpstation</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">pumpstation</span><span class="o">.</span><span class="n">name</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">pumpstation</span><span class="o">.</span><span class="n">code</span>
        <span class="k">if</span> <span class="n">pumps_subset</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1"># more than one pump</span>
            <span class="n">cmp_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Pumpstation </span><span class="si">{</span><span class="n">pumpstation</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s1"> contains </span><span class="si">{</span><span class="n">pumps_subset</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1"> openings. Creating a compound structure with a fictional pump for each one.&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">ipump</span><span class="p">,</span> <span class="p">(</span><span class="n">_</span><span class="p">,</span><span class="n">pump</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pumps_subset</span><span class="o">.</span><span class="n">iterrows</span><span class="p">()):</span>

                <span class="n">pump_control</span> <span class="o">=</span> <span class="n">management</span><span class="p">[</span><span class="n">management</span><span class="o">.</span><span class="n">pompid</span><span class="o">==</span> <span class="n">pump</span><span class="o">.</span><span class="n">globalid</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">pump_control</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;No management found for </span><span class="si">{</span><span class="n">pump</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">continue</span>

                <span class="n">startlevelsuctionside</span> <span class="o">=</span> <span class="p">[</span><span class="n">pump_control</span><span class="p">[</span><span class="s2">&quot;bovengrens&quot;</span><span class="p">]]</span>
                <span class="n">stoplevelsuctionside</span> <span class="o">=</span> <span class="p">[</span><span class="n">pump_control</span><span class="p">[</span><span class="s2">&quot;ondergrens&quot;</span><span class="p">]]</span>

                <span class="n">pumpid</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">pumpstation</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s1">_</span><span class="si">{</span><span class="n">ipump</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s1">&#39;</span>
                <span class="n">cmp_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pumpid</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_pump</span><span class="p">(</span>
                    <span class="nb">id</span><span class="o">=</span><span class="n">pumpid</span><span class="p">,</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                    <span class="n">branchid</span><span class="o">=</span><span class="n">pumpstation</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
                    <span class="n">chainage</span><span class="o">=</span><span class="n">pumpstation</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">,</span>
                    <span class="n">orientation</span><span class="o">=</span><span class="s2">&quot;positive&quot;</span><span class="p">,</span>
                    <span class="n">numstages</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                    <span class="n">controlside</span><span class="o">=</span><span class="s2">&quot;suctionside&quot;</span><span class="p">,</span>
                    <span class="n">capacity</span><span class="o">=</span><span class="n">pump</span><span class="o">.</span><span class="n">maximalecapaciteit</span><span class="o">/</span><span class="mf">60.</span><span class="p">,</span>
                    <span class="n">startlevelsuctionside</span><span class="o">=</span><span class="n">startlevelsuctionside</span><span class="p">,</span>
                    <span class="n">stoplevelsuctionside</span><span class="o">=</span><span class="n">stoplevelsuctionside</span><span class="p">,</span>
                    <span class="n">startleveldeliveryside</span><span class="o">=</span><span class="n">startlevelsuctionside</span><span class="p">,</span>
                    <span class="n">stopleveldeliveryside</span><span class="o">=</span><span class="n">stoplevelsuctionside</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_compound</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;cmp_</span><span class="si">{</span><span class="n">pumpstation</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">structureids</span> <span class="o">=</span><span class="n">cmp_list</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#  only one pump</span>
            <span class="n">pump_control</span> <span class="o">=</span> <span class="n">management</span><span class="p">[</span><span class="n">management</span><span class="o">.</span><span class="n">pompid</span><span class="o">==</span> <span class="n">pumps_subset</span><span class="o">.</span><span class="n">globalid</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
            <span class="k">if</span> <span class="n">pump_control</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Skipping </span><span class="si">{</span><span class="n">pumpstation</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s1"> because there is no associated management.&#39;</span><span class="p">)</span>

            <span class="n">startlevelsuctionside</span> <span class="o">=</span> <span class="p">[</span><span class="n">pump_control</span><span class="p">[</span><span class="s2">&quot;bovengrens&quot;</span><span class="p">]]</span>
            <span class="n">stoplevelsuctionside</span> <span class="o">=</span> <span class="p">[</span><span class="n">pump_control</span><span class="p">[</span><span class="s2">&quot;ondergrens&quot;</span><span class="p">]]</span>


            <span class="c1"># the pumpstation has only one pump</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_pump</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="n">pumpstation</span><span class="o">.</span><span class="n">code</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                <span class="n">branchid</span><span class="o">=</span><span class="n">pumpstation</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
                <span class="n">chainage</span><span class="o">=</span><span class="n">pumpstation</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">,</span>
                <span class="n">orientation</span><span class="o">=</span><span class="s2">&quot;positive&quot;</span><span class="p">,</span>
                <span class="n">numstages</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="n">controlside</span><span class="o">=</span><span class="s2">&quot;suctionside&quot;</span><span class="p">,</span>
                <span class="n">capacity</span><span class="o">=</span><span class="n">pumps_subset</span><span class="o">.</span><span class="n">maximalecapaciteit</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="mf">60.</span><span class="p">,</span>
                <span class="n">startlevelsuctionside</span><span class="o">=</span><span class="n">startlevelsuctionside</span><span class="p">,</span>
                <span class="n">stoplevelsuctionside</span><span class="o">=</span><span class="n">stoplevelsuctionside</span><span class="p">,</span>
                <span class="n">startleveldeliveryside</span><span class="o">=</span><span class="n">startlevelsuctionside</span><span class="p">,</span>
                <span class="n">stopleveldeliveryside</span><span class="o">=</span><span class="n">stoplevelsuctionside</span><span class="p">,</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h4 id="hydrolib.dhydamo.converters.hydamo2df.StructuresIO.pumps_from_datamodel" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">pumps_from_datamodel</span><span class="p">(</span><span class="n">pumps</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

<a href="#hydrolib.dhydamo.converters.hydamo2df.StructuresIO.pumps_from_datamodel" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>From parsed data model of pumps</p>


            <details class="quote">
              <summary>Source code in <code>hydrolib/dhydamo/converters/hydamo2df.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@validate_arguments</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">pumps_from_datamodel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pumps</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;From parsed data model of pumps&quot;&quot;&quot;</span>

    <span class="k">for</span> <span class="n">pump_idx</span><span class="p">,</span> <span class="n">pump</span> <span class="ow">in</span> <span class="n">pumps</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_pump</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">pump</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">pump</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="s2">&quot;name&quot;</span> <span class="ow">in</span> <span class="n">pump</span><span class="o">.</span><span class="n">index</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">branchid</span><span class="o">=</span><span class="n">pump</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
            <span class="n">chainage</span><span class="o">=</span><span class="n">pump</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">,</span>
            <span class="n">orientation</span><span class="o">=</span><span class="s2">&quot;positive&quot;</span><span class="p">,</span>
            <span class="n">numstages</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">controlside</span><span class="o">=</span><span class="n">pump</span><span class="o">.</span><span class="n">controlside</span><span class="p">,</span>
            <span class="n">capacity</span><span class="o">=</span><span class="n">pump</span><span class="o">.</span><span class="n">maximumcapacity</span><span class="p">,</span>
            <span class="n">startlevelsuctionside</span><span class="o">=</span><span class="n">pump</span><span class="o">.</span><span class="n">startlevelsuctionside</span><span class="p">,</span>
            <span class="n">stoplevelsuctionside</span><span class="o">=</span><span class="n">pump</span><span class="o">.</span><span class="n">stoplevelsuctionside</span><span class="p">,</span>
            <span class="n">startleveldeliveryside</span><span class="o">=</span><span class="n">pump</span><span class="o">.</span><span class="n">startleveldeliveryside</span><span class="p">,</span>
            <span class="n">stopleveldeliveryside</span><span class="o">=</span><span class="n">pump</span><span class="o">.</span><span class="n">stopleveldeliveryside</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h4 id="hydrolib.dhydamo.converters.hydamo2df.StructuresIO.uweirs_from_datamodel" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">uweirs_from_datamodel</span><span class="p">(</span><span class="n">uweirs</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

<a href="#hydrolib.dhydamo.converters.hydamo2df.StructuresIO.uweirs_from_datamodel" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>"From parsed data model of universal weirs</p>


            <details class="quote">
              <summary>Source code in <code>hydrolib/dhydamo/converters/hydamo2df.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@validate_arguments</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">uweirs_from_datamodel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uweirs</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; &quot;From parsed data model of universal weirs&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">uweir_idx</span><span class="p">,</span> <span class="n">uweir</span> <span class="ow">in</span> <span class="n">uweirs</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_uweir</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">uweir</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">uweir</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="s2">&quot;name&quot;</span> <span class="ow">in</span> <span class="n">uweir</span><span class="o">.</span><span class="n">index</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">branchid</span><span class="o">=</span><span class="n">uweir</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
            <span class="n">chainage</span><span class="o">=</span><span class="n">uweir</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">,</span>
            <span class="n">crestlevel</span><span class="o">=</span><span class="n">uweir</span><span class="o">.</span><span class="n">crestlevel</span><span class="p">,</span>
            <span class="n">yvalues</span><span class="o">=</span><span class="n">uweir</span><span class="o">.</span><span class="n">yvalues</span><span class="p">,</span>
            <span class="n">zvalues</span><span class="o">=</span><span class="n">uweir</span><span class="o">.</span><span class="n">zvalues</span><span class="p">,</span>
            <span class="n">allowedflowdir</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
            <span class="n">dischargecoeff</span><span class="o">=</span><span class="n">uweir</span><span class="o">.</span><span class="n">dischargecoeff</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h4 id="hydrolib.dhydamo.converters.hydamo2df.StructuresIO.weirs" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">weirs</span><span class="p">(</span><span class="n">weirs</span><span class="p">:</span> <span class="n">ExtendedGeoDataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">profile_groups</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">profile_lines</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">profiles</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExtendedGeoDataFrame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">opening</span><span class="p">:</span> <span class="n">ExtendedDataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">management_device</span><span class="p">:</span> <span class="n">ExtendedDataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">usevelocityheight</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;true&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

<a href="#hydrolib.dhydamo.converters.hydamo2df.StructuresIO.weirs" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Method to convert HyDAMO weirs to DFlowFM structures: regular weirs, orifices and universal weirs.
If a weir ID corresponds to a 'stuwid' in the profile_groups object, a universal weir is created.
If the management_device corresponding to a weir has the field "overlaatonderlaat" set to "onderlaat', an orifice is schematized. In all other cases, a regular (rectangular) weir is created.</p>
<p>Parameters corrspond to the HyDAMO DAMO2.2 objects. DFlowFM keyword 'usevelocityheight' can be specificied as a string, default is 'true'.</p>


            <details class="quote">
              <summary>Source code in <code>hydrolib/dhydamo/converters/hydamo2df.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@validate_arguments</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">weirs</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">weirs</span><span class="p">:</span> <span class="n">ExtendedGeoDataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">profile_groups</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">profile_lines</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">profiles</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExtendedGeoDataFrame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">opening</span><span class="p">:</span> <span class="n">ExtendedDataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">management_device</span><span class="p">:</span> <span class="n">ExtendedDataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">usevelocityheight</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;true&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method to convert HyDAMO weirs to DFlowFM structures: regular weirs, orifices and universal weirs.</span>
<span class="sd">    If a weir ID corresponds to a &#39;stuwid&#39; in the profile_groups object, a universal weir is created.</span>
<span class="sd">    If the management_device corresponding to a weir has the field &quot;overlaatonderlaat&quot; set to &quot;onderlaat&#39;, an orifice is schematized. In all other cases, a regular (rectangular) weir is created.</span>

<span class="sd">    Parameters corrspond to the HyDAMO DAMO2.2 objects. DFlowFM keyword &#39;usevelocityheight&#39; can be specificied as a string, default is &#39;true&#39;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># bypass HyDAMO and add stuwid directly to managment for use in RTC</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">hydamo</span><span class="o">.</span><span class="n">management</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">hydamo</span><span class="o">.</span><span class="n">management</span><span class="p">[</span><span class="s1">&#39;stuwid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">index</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">weirs</span><span class="o">.</span><span class="n">code</span><span class="p">)))</span>
    <span class="k">if</span> <span class="n">profile_groups</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">profile_groups</span><span class="p">,</span> <span class="s2">&quot;stuwid&quot;</span><span class="p">):</span>
        <span class="n">index</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">weirs</span><span class="o">.</span><span class="n">globalid</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">profile_groups</span><span class="o">.</span><span class="n">stuwid</span><span class="p">))]</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="n">rweirs</span> <span class="o">=</span> <span class="n">weirs</span><span class="p">[</span><span class="n">index</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">weir</span> <span class="ow">in</span> <span class="n">rweirs</span><span class="o">.</span><span class="n">itertuples</span><span class="p">():</span>
        <span class="n">weir_opening</span> <span class="o">=</span> <span class="n">opening</span><span class="p">[</span><span class="n">opening</span><span class="o">.</span><span class="n">stuwid</span> <span class="o">==</span> <span class="n">weir</span><span class="o">.</span><span class="n">globalid</span><span class="p">]</span>

        <span class="c1"># check if a separate name field is present</span>
        <span class="k">if</span> <span class="s2">&quot;naam&quot;</span> <span class="ow">in</span> <span class="n">weirs</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">weir</span><span class="o">.</span><span class="n">naam</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">weir</span><span class="o">.</span><span class="n">code</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">weir</span><span class="o">.</span><span class="n">code</span>

        <span class="k">if</span> <span class="n">weir_opening</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Weir </span><span class="si">{</span><span class="n">weir</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s1"> contains </span><span class="si">{</span><span class="n">weir_opening</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1"> openings. Creating a compound structure with a fictional weir for each one.&#39;</span><span class="p">)</span>
            <span class="n">cmp_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">num_op</span><span class="p">,</span> <span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">op_row</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">weir_opening</span><span class="o">.</span><span class="n">iterrows</span><span class="p">()):</span>
                <span class="n">weir_mandev</span> <span class="o">=</span> <span class="n">management_device</span><span class="p">[</span>
                    <span class="n">management_device</span><span class="o">.</span><span class="n">kunstwerkopeningid</span>
                    <span class="o">==</span> <span class="n">op_row</span><span class="o">.</span><span class="n">globalid</span>
                <span class="p">]</span>
                <span class="n">weir_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">weir</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s1">_</span><span class="si">{</span><span class="n">num_op</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s1">&#39;</span>
                <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">hydamo</span><span class="o">.</span><span class="n">management</span><span class="o">.</span><span class="n">empty</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">hydamo</span><span class="o">.</span><span class="n">management</span><span class="p">,</span> <span class="s1">&#39;regelmiddelid&#39;</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="n">weir_mandev</span><span class="o">.</span><span class="n">globalid</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">hydamo</span><span class="o">.</span><span class="n">management</span><span class="o">.</span><span class="n">regelmiddelid</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">():</span>
                        <span class="n">idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">hydamo</span><span class="o">.</span><span class="n">management</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">hydamo</span><span class="o">.</span><span class="n">management</span><span class="o">.</span><span class="n">regelmiddelid</span> <span class="o">==</span> <span class="n">weir_mandev</span><span class="o">.</span><span class="n">globalid</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()]</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">hydamo</span><span class="o">.</span><span class="n">management</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s1">&#39;stuwid&#39;</span><span class="p">]</span> <span class="o">=</span><span class="n">weir_id</span>
                <span class="k">if</span> <span class="n">weir_mandev</span><span class="o">.</span><span class="n">overlaatonderlaat</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;overlaat&#39;</span><span class="p">:</span>
                    <span class="n">cmp_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">weir_id</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_rweir</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">weir_id</span><span class="p">,</span>
                                                <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                                                <span class="n">branchid</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
                                                <span class="n">chainage</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">,</span>
                                                <span class="n">crestlevel</span><span class="o">=</span><span class="n">op_row</span><span class="o">.</span><span class="n">laagstedoorstroomhoogte</span><span class="p">,</span>
                                                <span class="n">crestwidth</span><span class="o">=</span><span class="n">op_row</span><span class="o">.</span><span class="n">laagstedoorstroombreedte</span><span class="p">,</span>
                                                <span class="n">corrcoeff</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">afvoercoefficient</span><span class="p">,</span>
                                                <span class="n">allowedflowdir</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
                                                <span class="n">usevelocityheight</span><span class="o">=</span><span class="n">usevelocityheight</span><span class="p">,</span>
                                             <span class="p">)</span>
                <span class="k">elif</span> <span class="n">weir_mandev</span><span class="o">.</span><span class="n">overlaatonderlaat</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;onderlaat&#39;</span><span class="p">:</span>
                    <span class="n">cmp_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">weir_id</span><span class="p">)</span>
                    <span class="k">if</span> <span class="s2">&quot;maximaaldebiet&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">weir_mandev</span> <span class="ow">or</span> <span class="n">pd</span><span class="o">.</span><span class="n">isnull</span><span class="p">(</span><span class="n">weir_mandev</span><span class="o">.</span><span class="n">maximaaldebiet</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
                        <span class="n">limitflow</span> <span class="o">=</span> <span class="s2">&quot;false&quot;</span>
                        <span class="n">maxq</span> <span class="o">=</span> <span class="mf">0.0</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">limitflow</span> <span class="o">=</span> <span class="s2">&quot;true&quot;</span>
                        <span class="n">maxq</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">weir_mandev</span><span class="o">.</span><span class="n">maximaaldebiet</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_orifice</span><span class="p">(</span>
                        <span class="nb">id</span><span class="o">=</span><span class="n">weir_id</span><span class="p">,</span>
                        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                        <span class="n">branchid</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
                        <span class="n">chainage</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">,</span>
                        <span class="n">crestlevel</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">weir_opening</span><span class="o">.</span><span class="n">laagstedoorstroomhoogte</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                        <span class="n">crestwidth</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">weir_opening</span><span class="o">.</span><span class="n">laagstedoorstroombreedte</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                        <span class="n">corrcoeff</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">afvoercoefficient</span><span class="p">,</span>
                        <span class="n">allowedflowdir</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
                        <span class="n">usevelocityheight</span><span class="o">=</span><span class="n">usevelocityheight</span><span class="p">,</span>
                        <span class="n">gateloweredgelevel</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">weir_opening</span><span class="o">.</span><span class="n">laagstedoorstroomhoogte</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                        <span class="o">+</span> <span class="nb">float</span><span class="p">(</span><span class="n">weir_mandev</span><span class="o">.</span><span class="n">hoogteopening</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                        <span class="n">uselimitflowpos</span><span class="o">=</span><span class="n">limitflow</span><span class="p">,</span>
                        <span class="n">limitflowpos</span><span class="o">=</span><span class="n">maxq</span><span class="p">,</span>
                        <span class="n">uselimitflowneg</span><span class="o">=</span><span class="n">limitflow</span><span class="p">,</span>
                        <span class="n">limitflowneg</span><span class="o">=</span><span class="n">maxq</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Skipping </span><span class="si">{</span><span class="n">weir</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s1"> - from &quot;overlaatonderlaat&quot; </span><span class="si">{</span><span class="n">weir_mandev</span><span class="o">.</span><span class="n">overlaatonderlaat</span><span class="si">}</span><span class="s1"> the type of structure could not be determined.&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_compound</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;cmp_</span><span class="si">{</span><span class="n">weir</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">structureids</span> <span class="o">=</span><span class="n">cmp_list</span><span class="p">)</span>
            <span class="c1"># self.structures.rweirs_df.drop(weir.code)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">weir_opening</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Skipping </span><span class="si">{</span><span class="n">weir</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s1"> because there is no associated opening.&#39;</span><span class="p">)</span>
                <span class="k">continue</span>

            <span class="n">weir_id</span> <span class="o">=</span> <span class="n">weir</span><span class="o">.</span><span class="n">code</span>
            <span class="n">weir_mandev</span> <span class="o">=</span> <span class="n">management_device</span><span class="p">[</span>
                    <span class="n">management_device</span><span class="o">.</span><span class="n">kunstwerkopeningid</span>
                    <span class="o">==</span> <span class="n">weir_opening</span><span class="o">.</span><span class="n">globalid</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="p">]</span>

            <span class="k">if</span> <span class="n">weir_mandev</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Skipping </span><span class="si">{</span><span class="n">weir</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s1"> because there is no associated management device.&#39;</span><span class="p">)</span>
                <span class="k">continue</span>

            <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">hydamo</span><span class="o">.</span><span class="n">management</span><span class="o">.</span><span class="n">empty</span><span class="p">)</span> <span class="o">&amp;</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">hydamo</span><span class="o">.</span><span class="n">management</span><span class="p">,</span> <span class="s1">&#39;regelmiddelid&#39;</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">weir_mandev</span><span class="o">.</span><span class="n">globalid</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">hydamo</span><span class="o">.</span><span class="n">management</span><span class="o">.</span><span class="n">regelmiddelid</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">():</span>
                    <span class="n">idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">hydamo</span><span class="o">.</span><span class="n">management</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">hydamo</span><span class="o">.</span><span class="n">management</span><span class="o">.</span><span class="n">regelmiddelid</span> <span class="o">==</span> <span class="n">weir_mandev</span><span class="o">.</span><span class="n">globalid</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()]</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">hydamo</span><span class="o">.</span><span class="n">management</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s1">&#39;stuwid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">weir_id</span>


            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">weir_mandev</span><span class="o">.</span><span class="n">overlaatonderlaat</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
                <span class="n">overlaatonderlaat</span> <span class="o">=</span> <span class="n">weir_mandev</span><span class="o">.</span><span class="n">overlaatonderlaat</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">overlaatonderlaat</span> <span class="o">=</span> <span class="n">weir_mandev</span><span class="o">.</span><span class="n">overlaatonderlaat</span>

            <span class="k">if</span> <span class="p">(</span>
                <span class="n">overlaatonderlaat</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                <span class="o">==</span> <span class="s2">&quot;overlaat&quot;</span>
            <span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_rweir</span><span class="p">(</span>
                    <span class="nb">id</span><span class="o">=</span><span class="n">weir_id</span><span class="p">,</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                    <span class="n">branchid</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
                    <span class="n">chainage</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">,</span>
                    <span class="n">crestlevel</span><span class="o">=</span><span class="n">weir_opening</span><span class="o">.</span><span class="n">laagstedoorstroomhoogte</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                    <span class="n">crestwidth</span><span class="o">=</span><span class="n">weir_opening</span><span class="o">.</span><span class="n">laagstedoorstroombreedte</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                    <span class="n">corrcoeff</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">afvoercoefficient</span><span class="p">,</span>
                    <span class="n">allowedflowdir</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
                    <span class="n">usevelocityheight</span><span class="o">=</span><span class="n">usevelocityheight</span><span class="p">,</span>
                <span class="p">)</span>

            <span class="k">elif</span> <span class="p">(</span>
                <span class="n">overlaatonderlaat</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                <span class="o">==</span> <span class="s2">&quot;onderlaat&quot;</span>
            <span class="p">):</span>
                <span class="k">if</span> <span class="s2">&quot;maximaaldebiet&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">weir_mandev</span> <span class="ow">or</span> <span class="n">pd</span><span class="o">.</span><span class="n">isnull</span><span class="p">(</span><span class="n">weir_mandev</span><span class="o">.</span><span class="n">maximaaldebiet</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
                    <span class="n">limitflow</span> <span class="o">=</span> <span class="s2">&quot;false&quot;</span>
                    <span class="n">maxq</span> <span class="o">=</span> <span class="mf">0.0</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">limitflow</span> <span class="o">=</span> <span class="s2">&quot;true&quot;</span>
                    <span class="n">maxq</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">weir_mandev</span><span class="o">.</span><span class="n">maximaaldebiet</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_orifice</span><span class="p">(</span>
                    <span class="nb">id</span><span class="o">=</span><span class="n">weir_id</span><span class="p">,</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                    <span class="n">branchid</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
                    <span class="n">chainage</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">,</span>
                    <span class="n">crestlevel</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">weir_opening</span><span class="o">.</span><span class="n">laagstedoorstroomhoogte</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                    <span class="n">crestwidth</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">weir_opening</span><span class="o">.</span><span class="n">laagstedoorstroombreedte</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                    <span class="n">corrcoeff</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">afvoercoefficient</span><span class="p">,</span>
                    <span class="n">allowedflowdir</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
                    <span class="n">usevelocityheight</span><span class="o">=</span><span class="n">usevelocityheight</span><span class="p">,</span>
                    <span class="n">gateloweredgelevel</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">weir_opening</span><span class="o">.</span><span class="n">laagstedoorstroomhoogte</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                    <span class="o">+</span> <span class="nb">float</span><span class="p">(</span><span class="n">weir_mandev</span><span class="o">.</span><span class="n">hoogteopening</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                    <span class="n">uselimitflowpos</span><span class="o">=</span><span class="n">limitflow</span><span class="p">,</span>
                    <span class="n">limitflowpos</span><span class="o">=</span><span class="n">maxq</span><span class="p">,</span>
                    <span class="n">uselimitflowneg</span><span class="o">=</span><span class="n">limitflow</span><span class="p">,</span>
                    <span class="n">limitflowneg</span><span class="o">=</span><span class="n">maxq</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Skipping </span><span class="si">{</span><span class="n">weir</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s1"> - from &quot;overlaatonderlaat&quot; </span><span class="si">{</span><span class="n">weir_mandev</span><span class="o">.</span><span class="n">overlaatonderlaat</span><span class="si">}</span><span class="s1"> the type of structure could not be determined.&#39;</span><span class="p">)</span>

    <span class="n">uweirs</span> <span class="o">=</span> <span class="n">weirs</span><span class="p">[</span><span class="n">index</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">uweir</span> <span class="ow">in</span> <span class="n">uweirs</span><span class="o">.</span><span class="n">itertuples</span><span class="p">():</span>
        <span class="c1"># check if a separate name field is present</span>
        <span class="k">if</span> <span class="s2">&quot;naam&quot;</span> <span class="ow">in</span> <span class="n">uweirs</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">uweir</span><span class="o">.</span><span class="n">naam</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">uweir</span><span class="o">.</span><span class="n">code</span>

        <span class="n">prof</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">profiles</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="s2">&quot;stuwid&quot;</span> <span class="ow">in</span> <span class="n">profile_groups</span><span class="p">):</span>
            <span class="n">group</span> <span class="o">=</span> <span class="n">profile_groups</span><span class="p">[</span><span class="n">profile_groups</span><span class="p">[</span><span class="s2">&quot;stuwid&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">uweir</span><span class="o">.</span><span class="n">globalid</span><span class="p">]</span>
            <span class="n">line</span> <span class="o">=</span> <span class="n">profile_lines</span><span class="p">[</span>
                <span class="n">profile_lines</span><span class="p">[</span><span class="s2">&quot;profielgroepid&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">group</span><span class="p">[</span><span class="s2">&quot;globalid&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="p">]</span>
            <span class="n">prof</span> <span class="o">=</span> <span class="n">profiles</span><span class="p">[</span><span class="n">profiles</span><span class="p">[</span><span class="s2">&quot;profiellijnid&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">line</span><span class="p">[</span><span class="s2">&quot;globalid&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">prof</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
                <span class="n">counts</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">prof</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span><span class="p">[:])</span>
                <span class="n">xyz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">(</span><span class="n">prof</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span><span class="p">[:])</span>
                <span class="n">length</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">r_</span><span class="p">[</span>
                    <span class="mi">0</span><span class="p">,</span>
                    <span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">hypot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">xyz</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">xyz</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]))),</span>
                <span class="p">]</span>
                <span class="n">yzvalues</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">c_</span><span class="p">[</span><span class="n">length</span><span class="p">,</span> <span class="n">xyz</span><span class="p">[:,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">xyz</span><span class="p">[:,</span> <span class="o">-</span><span class="mi">1</span><span class="p">])]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">uweir</span><span class="p">,</span> <span class="s1">&#39;laagstedoorstroomhoogte&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">pd</span><span class="o">.</span><span class="n">isnull</span><span class="p">(</span><span class="n">uweir</span><span class="o">.</span><span class="n">laagstedoorstroomhoogte</span><span class="p">):</span>
            <span class="n">kruinhoogte</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">xyz</span><span class="p">[:,</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">kruinhoogte</span> <span class="o">=</span> <span class="n">uweir</span><span class="o">.</span><span class="n">laagstedoorstroomhoogte</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">prof</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># return an error it is still not found</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">uweir</span><span class="o">.</span><span class="n">code</span><span class="si">}</span><span class="s2"> is not found in any cross-section.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_uweir</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">uweir</span><span class="o">.</span><span class="n">code</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">branchid</span><span class="o">=</span><span class="n">uweir</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
            <span class="n">chainage</span><span class="o">=</span><span class="n">uweir</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">,</span>
            <span class="n">crestlevel</span><span class="o">=</span><span class="n">kruinhoogte</span><span class="p">,</span>
            <span class="n">dischargecoeff</span><span class="o">=</span><span class="n">uweir</span><span class="o">.</span><span class="n">afvoercoefficient</span><span class="p">,</span>
            <span class="n">allowedflowdir</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
            <span class="n">numlevels</span><span class="o">=</span><span class="n">counts</span><span class="p">,</span>
            <span class="n">yvalues</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">yz</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">:</span><span class="s2">7.3f</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">yz</span> <span class="ow">in</span> <span class="n">yzvalues</span><span class="p">]),</span>
            <span class="n">zvalues</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">yz</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">7.3f</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">yz</span> <span class="ow">in</span> <span class="n">yzvalues</span><span class="p">]),</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h4 id="hydrolib.dhydamo.converters.hydamo2df.StructuresIO.weirs_from_datamodel" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">weirs_from_datamodel</span><span class="p">(</span><span class="n">weirs</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

<a href="#hydrolib.dhydamo.converters.hydamo2df.StructuresIO.weirs_from_datamodel" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>"From parsed data model of weirs</p>


            <details class="quote">
              <summary>Source code in <code>hydrolib/dhydamo/converters/hydamo2df.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@validate_arguments</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">weirs_from_datamodel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">weirs</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; &quot;From parsed data model of weirs&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">weir_idx</span><span class="p">,</span> <span class="n">weir</span> <span class="ow">in</span> <span class="n">weirs</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">add_weir</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="s2">&quot;name&quot;</span> <span class="ow">in</span> <span class="n">weir</span><span class="o">.</span><span class="n">index</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
            <span class="n">branchid</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">branch_id</span><span class="p">,</span>
            <span class="n">chainage</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">branch_offset</span><span class="p">,</span>
            <span class="n">crestlevel</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">crestlevel</span><span class="p">,</span>
            <span class="n">crestwidth</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">crestwidth</span><span class="p">,</span>
            <span class="n">corrcoeff</span><span class="o">=</span><span class="n">weir</span><span class="o">.</span><span class="n">corrcoeff</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>




  </div>

    </div>

</div>




  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 Deltares
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="https://github.com/Deltares/HYDROLIB" target="_blank" rel="noopener" title="Source code" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
    <a href="https://gitter.im/Deltares/HYDROLIB" target="_blank" rel="noopener" title="Chat with us on Gitter" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M66.4 322.5H16V0h50.4zM166.9 76.1h-50.4V512h50.4zm100.6 0h-50.4V512h50.4zM368 76h-50.4v247H368z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.instant", "navigation.indexes", "navigation.tracking", "navigation.tabs", "navigation.top", "toc.integrate"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>